define("theme_apoa/mymodal",["jquery","theme_apoa/swiper"],(function($,Swiper){return{init:function(){const jumbo=document.getElementById("jumbo"),subjumbo=document.getElementById("jumbomodal"),menuItems=document.querySelectorAll(".sidejumbo-link"),swiperpages=document.querySelectorAll(".swiper-slide"),closemodal=document.getElementById("closemodal");var mySwiper=new Swiper(".swiper-container",{loop:!0,pagination:{div:".swiper-pagination",clickable:!0},preventClicks:!0});function closemodalfunc(){subjumbo.addEventListener("animationend",(function handleAnimationEnd(){subjumbo.classList.replace("hiding","hide"),subjumbo.removeEventListener("animationend",handleAnimationEnd)})),subjumbo.classList.remove("drag"),subjumbo.classList.add("hiding"),subjumbo.classList.remove("show"),{}}$("#pagination-0").hover((function(){mySwiper.slideToLoop(0)})),$("#pagination-1").hover((function(){mySwiper.slideToLoop(1)})),$("#pagination-2").hover((function(){mySwiper.slideToLoop(2)})),mySwiper.on("slideChange",(function(){({})[mySwiper.realIndex]=!0})),null!==closemodal&&(closemodal.addEventListener("touchstart",(function(event){closemodalfunc(),event.preventDefault()})),closemodal.addEventListener("click",(function(){closemodalfunc()})));var delayTimer,tapstartX,tapstartY,touchedmenuitem,mouseovermenu=!1,mouseoversub=!1,tapstart=!1,isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints;function handleAnimationEnd(){subjumbo.classList.replace("hiding","hide"),{},subjumbo.removeEventListener("animationend",handleAnimationEnd)}function startDelayTimerOver(){clearTimeout(delayTimer),delayTimer=setTimeout((function(){mouseoversub||mouseovermenu||(subjumbo.addEventListener("animationend",handleAnimationEnd),subjumbo.classList.replace("hiding","show"),handleAnimationEnd())}),200)}function startDelayTimer(){clearTimeout(delayTimer),delayTimer=setTimeout((function(){mouseoversub||mouseovermenu||(subjumbo.addEventListener("animationend",handleAnimationEnd),subjumbo.classList.replace("show","hiding"),handleAnimationEnd())}),200)}swiperpages.forEach((swiperpage=>{var swiperimg=swiperpage.querySelector("img"),swiperlink=swiperpage.querySelector("a"),query='[data-link-id="'+swiperpage.getAttribute("data-control-id")+'"]',swipercontrol=document.querySelector(query);null!==swipercontrol&&(swiperimg.src=swipercontrol.getAttribute("data-modalimg"),swiperlink.href=swipercontrol.getAttribute("data-link-address"))})),menuItems.forEach((menuItem=>{!0!==isTouchDevice&&menuItem.addEventListener("click",(function(e){!1===tapstart&&(window.location.href=e.currentTarget.getAttribute("data-link-address"))})),menuItem.addEventListener("touchstart",(function(e){tapstart=!0;var touch=e.touches[0];tapstartX=touch.clientX,tapstartY=touch.clientY})),menuItem.addEventListener("touchend",(function(e){if(!0===tapstart){var changedTouch=e.changedTouches[0];const diffX=Math.abs(changedTouch.clientX-tapstartX),diffY=Math.abs(changedTouch.clientY-tapstartY);let delta=30;diffX<delta&&diffY<delta&&(tapstart=!1,touchedmenuitem==menuItem.getAttribute("data-link-id")&&(window.location.href=e.currentTarget.getAttribute("data-link-address")),subjumbo.addEventListener("animationend",(function handleAnimationEnd(){subjumbo.classList.replace("showing","show"),subjumbo.removeEventListener("animationend",handleAnimationEnd),mouseovermenu=!0})),subjumbo.classList.replace("hide","showing")),touchedmenuitem=menuItem.getAttribute("data-link-id")}})),menuItem.addEventListener("mouseover",(function(){subjumbo.addEventListener("animationend",(function handleAnimationEnd(){subjumbo.classList.replace("showing","show"),subjumbo.removeEventListener("animationend",handleAnimationEnd)})),subjumbo.classList.replace("hide","showing"),startDelayTimerOver(),mouseovermenu=!0})),menuItem.addEventListener("mouseout",(function(){mouseovermenu=!1,startDelayTimer()}))})),jumbo.addEventListener("mouseout",(function(){mouseoversub=!1,startDelayTimer()})),jumbo.addEventListener("mouseover",(function(){mouseoversub=!0}));let jumboHeight=jumbo.clientHeight,startY=0,momentum=0;subjumbo.addEventListener("touchstart",(function(event){subjumbo.classList.replace("show","drag"),startY=event.touches[0].clientY,momentum=0})),subjumbo.addEventListener("touchmove",(function(event){event.preventDefault();const deltaY=event.touches[0].clientY-startY,percent=Math.floor(deltaY/jumboHeight*100);percent>0&&(subjumbo.style.top=Math.min(100,percent)+"%");momentum=deltaY})),subjumbo.addEventListener("touchend",(function(){if(!subjumbo.classList.contains("drag"))return;subjumbo.style.transitionDuration="0.5s",subjumbo.style.top=Math.min(0,0)+"%",parseFloat(subjumbo.style.top)>60||momentum>250?(subjumbo.classList.replace("drag","hide"),{}):subjumbo.classList.replace("drag","show");setTimeout((()=>{startY=0,momentum=0}),100)}))}}}));

//# sourceMappingURL=mymodal.min.js.map