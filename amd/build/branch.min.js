!function(){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,t,n){if(!n||null!=e)return null==(n=$jscomp.propertyToPolyfillSymbol[t])?e[t]:void 0!==(n=e[n])?n:e[t]};$jscomp.polyfill=function(e,t,n,r){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,t,n,r):$jscomp.polyfillUnisolated(e,t,n,r))},$jscomp.polyfillUnisolated=function(e,t,n,r){for(r=0,n=$jscomp.global,e=e.split(".");r<e.length-1;r++){var i=e[r];if(!(i in n))return;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},$jscomp.polyfillIsolated=function(e,t,n,r){var i=e.split(".");e=1===i.length,r=i[0],r=!e&&r in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var a=0;a<i.length-1;a++){var o=i[a];if(!(o in r))return;r=r[o]}i=i[i.length-1],null!=(t=t(n=$jscomp.IS_SYMBOL_NATIVE&&"es6"===n?r[i]:null))&&(e?$jscomp.defineProperty($jscomp.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===$jscomp.propertyToPolyfillSymbol[i]&&(n=1e9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[i]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(i):$jscomp.POLYFILL_PREFIX+n+"$"+i),$jscomp.defineProperty(r,$jscomp.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:t})))},$jscomp.polyfill("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}},"es7","es3"),$jscomp.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},$jscomp.polyfill("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)$jscomp.owns(e,t)&&n.push([t,e[t]]);return n}},"es8","es3");var COMPILED=!0,goog=goog||{};if(goog.global=this||self,goog.exportPath_=function(e,t,n,r){e=e.split("."),r=r||goog.global,e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)if(e.length||void 0===t)r=r[i]&&r[i]!==Object.prototype[i]?r[i]:r[i]={};else if(!n&&goog.isObject(t)&&goog.isObject(r[i]))for(var a in t)t.hasOwnProperty(a)&&(r[i][a]=t[a]);else r[i]=t},goog.define=function(e,t){if(!COMPILED){var n=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES;n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t,n){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t,n)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.getScriptNonce_=function(e){return(e=(e=(e||goog.global).document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw Error("Importing test-only code into non-debug environment"+((e=e||"")?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t},goog.addDependency=function(e,t,n,r){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,r)},goog.ENABLE_DEBUG_LOADER=!1,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRUSTED_TYPES_POLICY_NAME="goog",goog.hasBadLetScoping=null,goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var n={},r=n;if("function"==typeof e)r=e.call(void 0,r);else if("string"==typeof e)r=goog.loadModuleFromSource_.call(void 0,r,e);else throw Error("Invalid module definition");var i=goog.moduleLoaderState_.moduleName;if("string"==typeof i&&i)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(i,r,n!==r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[i]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+i+'"')}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a,b){return eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(b)),a},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(n){return null}},goog.typeOf=function(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return Object.prototype.hasOwnProperty.call(e,goog.UID_PROPERTY_)&&e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();if("undefined"!=typeof Map&&e instanceof Map)return new Map(e);if("undefined"!=typeof Set&&e instanceof Set)return new Set(e);for(var n in t="array"==t?[]:{},e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.now=function(){return Date.now()},goog.globalEval=function(a){(0,eval)(a)},goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},r=function(e){e=e.split("-");for(var t=[],r=0;r<e.length;r++)t.push(n(e[r]));return t.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(e){return e},e=t?e+"-"+r(t):r(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.GetMsgOptions=function(){},goog.getMsg=function(e,t,n){return n&&n.html&&(e=e.replace(/</g,"&lt;")),n&&n.unescapeHtmlEntities&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,!0,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,r=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],t}:e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,n=goog.global.trustedTypes;if(!n||!n.createPolicy)return t;try{t=n.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(r){goog.logToConsole_(r.message)}return t},!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.isEdge_=function(){return!!(goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"").match(/Edge\/(\d+)(\.\d)*/i)},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(void 0!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var n=e[t].src,r=n.lastIndexOf("?");if(r=-1==r?n.length:r,"base.js"==n.slice(r-7,r)){goog.basePath=n.slice(0,r-7);break}}}},goog.findBasePath_(),goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory,this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){r&&(goog.global.setTimeout(r,0),r=null)}var r=t;if(e.length){t=[];for(var i=0;i<e.length;i++){var a=this.getPathFromDeps_(e[i]);if(!a)throw Error("Unregonized namespace: "+e[i]);t.push(this.dependencies_[a])}a=goog.require;var o=0;for(i=0;i<e.length;i++)a(e[i]),t[i].onLoad(function(){++o==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{})),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(this.getPathFromDeps_(e)){var t=this,n=[],r=function(e){var i=t.getPathFromDeps_(e);if(!i)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[i]){for(t.written_[i]=!0,e=t.dependencies_[i],i=0;i<e.requires.length;i++)goog.isProvided_(e.requires[i])||r(e.requires[i]);n.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()}else goog.logToConsole_("goog.require could not find: "+e)},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)(function(){var n=!1,r=e.depsToLoad_.shift(),i=!1;e.loading_(r);var a={pause:function(){if(n)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){n?e.resume_():t=!1},loaded:function(){if(i)throw Error("Double call to loaded.");i=!0,e.loaded_(r)},pending:function(){for(var t=[],n=0;n<e.loadingDeps_.length;n++)t.push(e.loadingDeps_[n]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(n)throw Error("Cannot register with defer after the call to load.");e.defer_(r,t)},areDepsLoaded:function(){return e.areDepsLoaded_(r.requires)}};try{r.load(a)}finally{n=!0}})();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,r,i){this.path=e,this.relativePath=t,this.provides=n,this.requires=r,this.loadFlags=i,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1)),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(e in goog.Dependency.callbackMap_){for(var n=goog.Dependency.callbackMap_[e],r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);n.apply(void 0,r)}else throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).")},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){e.loaded();return}throw Error('Cannot write "'+this.path+'" after document load')}var n=goog.getScriptNonce_();if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var r=function(t){t.readyState&&"complete"!=t.readyState?t.onload=r:(goog.Dependency.unregisterCallback_(i),e.loaded())},i=goog.Dependency.registerCallback_(r);n=n?' nonce="'+n+'"':"";var a='<script src="'+this.path+'"'+n+(goog.Dependency.defer_?" defer":"")+' id="script-'+i+'"></script>';a+="<script"+n+">",a=goog.Dependency.defer_?a+("document.getElementById('script-"+i+"').onload = function() {\n  goog.Dependency.callback_('")+i+"', this);\n};\n":a+("goog.Dependency.callback_('"+i+"', document.getElementById('script-")+i+"'));",a+="</script>",t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(a):a)}else{var o=t.createElement("script");o.defer=goog.Dependency.defer_,o.async=!1,n&&(o.nonce=n),o.onload=function(){o.onload=null,e.loaded()},o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,t.head.appendChild(o)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){function t(e,t){var n="",i=goog.getScriptNonce_();i&&(n=' nonce="'+i+'"'),e=t?'<script type="module" crossorigin'+n+">"+t+"</script>":'<script type="module" crossorigin src="'+e+'"'+n+"></script>",r.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)}function n(e,t){var n=r.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var i=goog.getScriptNonce_();i&&(n.nonce=i),t?n.text=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(t):t:n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,r.head.appendChild(n)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var r=goog.global.document,i=this;if(goog.isDocumentLoading_()){var a=t;goog.Dependency.defer_=!0}else a=n;var o=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(o),e.setModuleState(goog.ModuleType.ES6)});a(void 0,'goog.Dependency.callback_("'+o+'")'),a(this.path,void 0);var s=goog.Dependency.registerCallback_(function(t){goog.Dependency.unregisterCallback_(s),e.registerEs6ModuleExports(i.path,t,goog.moduleLoaderState_.moduleName)});a(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+s+'", m)');var l=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(l),e.clearModuleState(),e.loaded()});a(void 0,'goog.Dependency.callback_("'+l+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,n,r,i){goog.Dependency.call(this,e,t,n,r,i),this.contents_=null,this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){i.contents_=goog.loadFileSync_(i.path),i.contents_&&(i.contents_=i.transform(i.contents_),i.contents_&&(i.contents_+="\n//# sourceURL="+i.path))}function n(){if(i.lazyFetch_&&t(),i.contents_){a&&e.setModuleState(goog.ModuleType.ES6);try{var n=i.contents_;if(i.contents_=null,goog.globalEval(goog.CLOSURE_EVAL_PREFILTER_.createScript(n)),a)var r=goog.moduleLoaderState_.moduleName}finally{a&&e.clearModuleState()}a&&goog.global.$jscomp.require.ensure([i.getPathName()],function(){e.registerEs6ModuleExports(i.path,goog.global.$jscomp.require(i.getPathName()),r)}),e.loaded()}}function r(){var e=goog.global.document,t=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(t),n()}),r=goog.getScriptNonce_();r="<script"+(r?' nonce="'+r+'"':"")+">"+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"</script>",e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(r):r)}var i=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var a=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var o=1<e.pending().length;if(goog.Dependency.defer_&&(o||goog.isDocumentLoading_()))e.defer(function(){n()});else{var s=goog.global.document;if(o=goog.inHtmlDocument_()&&("ActiveXObject"in goog.global||goog.isEdge_()),a&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!o){goog.Dependency.defer_=!0,e.pause();var l=s.onreadystatechange;s.onreadystatechange=function(){"interactive"==s.readyState&&(s.onreadystatechange=l,n(),e.resume()),"function"==typeof l&&l.apply(void 0,arguments)}}else goog.inHtmlDocument_()&&goog.isDocumentLoading_()?r():n()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,r,i){goog.TransformedDependency.call(this,e,t,n,r,i)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,r,i){goog.TransformedDependency.call(this,e,t,n,r,i)},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.prototype.addDependency=function(e,t,n,r){t=t||[],e=e.replace(/\\/g,"/");var i=goog.normalizePath_(goog.basePath+e);for(r&&"boolean"!=typeof r||(r=r?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(i,e,t,n,r),this.dependencies_[i]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=i;this.idToPath_[e]=i},goog.DependencyFactory=function(){},goog.DependencyFactory.prototype.createDependency=function(e,t,n,r,i){return i.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,r,i):i.module==goog.ModuleType.ES6?goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,n,r,i):new goog.Es6ModuleDependency(e,t,n,r,i):new goog.Dependency(e,t,n,r,i)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),!COMPILED){var isChrome87=!1;try{isChrome87=eval(goog.global.trustedTypes.emptyScript)!==goog.global.trustedTypes.emptyScript}catch(a){}goog.CLOSURE_EVAL_PREFILTER_=goog.global.trustedTypes&&isChrome87&&goog.createTrustedTypesPolicy("goog#base#devonly#eval")||{createScript:goog.identity_}}goog.json={},goog.json.Replacer={},goog.json.Reviver={},goog.json.USE_NATIVE_JSON=!1,goog.json.isValid=function(e){return!/^\s*$/.test(e)&&/^[\],:{}\s\u2028\u2029]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))},goog.json.errorLogger_=()=>{},goog.json.setErrorLogger=function(e){goog.json.errorLogger_=e},goog.json.parse=goog.json.USE_NATIVE_JSON?goog.global.JSON.parse:function(a){let b;try{return goog.global.JSON.parse(a)}catch(c){b=c}if(a=String(a),goog.json.isValid(a))try{let c=eval("("+a+")");return b&&goog.json.errorLogger_("Invalid JSON: "+a,b),c}catch(c){}throw Error("Invalid JSON string: "+a)},goog.json.serialize=goog.json.USE_NATIVE_JSON?goog.global.JSON.stringify:function(e,t){return new goog.json.Serializer(t).serialize(e)},goog.json.Serializer=function(e){this.replacer_=e},goog.json.Serializer.prototype.serialize=function(e){let t=[];return this.serializeInternal(e,t),t.join("")},goog.json.Serializer.prototype.serializeInternal=function(e,t){if(null==e)t.push("null");else{if("object"==typeof e){if(Array.isArray(e)){this.serializeArray(e,t);return}if(e instanceof String||e instanceof Number||e instanceof Boolean)e=e.valueOf();else{this.serializeObject_(e,t);return}}switch(typeof e){case"string":this.serializeString_(e,t);break;case"number":this.serializeNumber_(e,t);break;case"boolean":t.push(String(e));break;case"function":t.push("null");break;default:throw Error("Unknown type: "+typeof e)}}},goog.json.Serializer.charToJsonCharCache_={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},goog.json.Serializer.charsToReplace_=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,goog.json.Serializer.prototype.serializeString_=function(e,t){t.push('"',e.replace(goog.json.Serializer.charsToReplace_,function(e){let t=goog.json.Serializer.charToJsonCharCache_[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).slice(1),goog.json.Serializer.charToJsonCharCache_[e]=t),t}),'"')},goog.json.Serializer.prototype.serializeNumber_=function(e,t){t.push(isFinite(e)&&!isNaN(e)?String(e):"null")},goog.json.Serializer.prototype.serializeArray=function(e,t){let n=e.length;t.push("[");var r="";for(let i=0;i<n;i++)t.push(r),r=e[i],this.serializeInternal(this.replacer_?this.replacer_.call(e,String(i),r):r,t),r=",";t.push("]")},goog.json.Serializer.prototype.serializeObject_=function(e,t){t.push("{");let n="";for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let i=e[r];"function"!=typeof i&&(t.push(n),this.serializeString_(r,t),t.push(":"),this.serializeInternal(this.replacer_?this.replacer_.call(e,r,i):i,t),n=",")}t.push("}")};var message,config={app_service_endpoint:"https://app.link",link_service_endpoint:"https://bnc.lt",api_endpoint:"https://api2.branch.io",version:"2.82.0"},safejson={parse:function(e){e=String(e);try{return JSON.parse(e)}catch(t){}throw Error("Invalid JSON string: "+e)},stringify:function(e){try{return"object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify(e):goog.json.serialize(e)}catch(t){}throw Error("Could not stringify object")}},utils={};function isSafariBrowser(e){return!!/^((?!chrome|android|crios|firefox|fxios|edg|yabrowser).)*safari/i.test(e)}function isChromeBrowser(e){return!!/(chrome|crios)/i.test(e)}function isFirefoxBrowser(e){return!!/(fxios|firefox)/i.test(e)}function isEdgeBrowser(e){return!!/edg/i.test(e)}function isOperaBrowser(e){return!!/(opt|opr)/i.test(e)}function isYandexBrowser(e){return!!/yabrowser/i.test(e)}function isMacintoshDesktop(e){return e&&-1<e.indexOf("Macintosh")}function isGTEVersion(e,t){if(t=t||11,(e=/version\/([^ ]*)/i.exec(e))&&e[1])try{if(parseFloat(e[1])>=t)return!0}catch(n){}return!1}function isSafari13OrGreateriPad(e){return e&&isSafariBrowser(e)&&isMacintoshDesktop(e)&&isGTEVersion(e,13)&&screen.height>screen.width}function isIOS(e){return e&&/(iPad|iPod|iPhone)/.test(e)}utils.debug=!1,utils.retries=2,utils.retry_delay=200,utils.timeout=5e3,utils.nonce="",utils.extendedJourneysAssistExpiryTime=6048e5,utils.instrumentation={},utils.userAgentData=null,utils.navigationTimingAPIEnabled="undefined"!=typeof window&&!!(window.performance&&window.performance.timing&&window.performance.timing.navigationStart),utils.timeSinceNavigationStart=function(){return(Date.now()-window.performance.timing.navigationStart).toString()},utils.currentRequestBrttTag="",utils.allowDMAParamURLMap={"/v1/open":"","/v1/pageview":"","/v2/event/standard":"user_data","/v2/event/custom":"user_data"},utils.calculateBrtt=function(e){return e&&"number"==typeof e?(Date.now()-e).toString():null},utils.dismissEventToSourceMapping={didClickJourneyClose:"Button(X)",didClickJourneyContinue:"Dismiss Journey text",didClickJourneyBackgroundDismiss:"Background Dismiss",didScrollJourneyBackgroundDismiss:"Background Dismiss"},utils.userPreferences={trackingDisabled:!1,enableExtendedJourneysAssist:!1,whiteListedEndpointsWithData:{"/v1/open":{link_identifier:"\\d+"},"/v1/pageview":{event:"pageview"},"/v1/dismiss":{event:"dismiss"},"/v1/url":{}},allowErrorsInCallback:!1,shouldBlockRequest:function(e,t){var n=document.createElement("a");n.href=e,e=[config.api_endpoint,config.app_service_endpoint,config.link_service_endpoint];var r=n.origin;if(r.endsWith("/")&&(r=r.substring(0,r.length-1)),!e.includes(r))return!1;if("/"!=(n=n.pathname)[0]&&(n="/"+n),!(n=utils.userPreferences.whiteListedEndpointsWithData[n]))return!0;if(0<Object.keys(n).length){if(!t)return!0;for(var i in n)if(e=RegExp(n[i]),!t.hasOwnProperty(i)||!e.test(t[i]))return!0}return!1}},utils.generateDynamicBNCLink=function(e,t){if(e||t){e=config.link_service_endpoint+"/a/"+e+"?";for(var n="tags alias channel feature stage campaign type duration sdk source data".split(" "),r=0;r<n.length;r++){var i=n[r],a=t[i];if(a){if("tags"===i&&Array.isArray(a))for(var o=0;o<a.length;o++)e=("?"===e[e.length-1]?e+i:e+"&"+i)+"="+encodeURIComponent(a[o]);else("string"==typeof a&&0<a.length||"number"==typeof a)&&("data"===i&&"string"==typeof a&&(a=utils.base64encode(a)),e=("?"===e[e.length-1]?e+i:e+"&"+i)+"="+encodeURIComponent(a))}}return e}},utils.cleanApplicationAndSessionStorage=function(e){e&&(e.device_fingerprint_id=null,e.sessionLink=null,e.session_id=null,e.identity_id=null,e.identity=null,e.browser_fingerprint_id=null,e._deepviewCta&&delete e._deepviewCta,e._deepviewRequestForReplay&&delete e._deepviewRequestForReplay,e._storage.remove("branch_view_enabled"),session.set(e._storage,{},!0))},utils.httpMethod={POST:"POST",GET:"GET"},utils.messages={missingParam:"API request $1 missing parameter $2",invalidType:"API request $1, parameter $2 is not $3",nonInit:"Branch SDK not initialized",initPending:"Branch SDK initialization pending and a Branch method was called outside of the queue order",initFailed:"Branch SDK initialization failed, so further methods cannot be called",existingInit:"Branch SDK already initialized",missingAppId:"Missing Branch app ID",callBranchInitFirst:"Branch.init must be called first",timeout:"Request timed out",blockedByClient:"Request blocked by client, probably adblock",missingUrl:"Required argument: URL, is missing",trackingDisabled:"Requested operation cannot be completed since tracking is disabled",deepviewNotCalled:"Cannot call Deepview CTA, please call branch.deepview() first",missingIdentity:"setIdentity - required argument identity should have a non-null value"},utils.bannerThemes=["light","dark"],utils.getLocationSearch=function(){return utils.isIframeAndFromSameOrigin()?window.top.location.search:window.location.search},utils.getLocationHash=function(){return utils.isIframeAndFromSameOrigin()?window.top.location.hash:window.location.hash},utils.message=function(e,t,n,r){return e=e.replace(/\$(\d)/g,function(e,n){return t[parseInt(n,10)-1]}),n&&(e+="\n Failure Code:"+n),r&&(e+="\n Failure Details:"+r),utils.debug&&console&&console.log(e),e},utils.whiteListSessionData=function(e){return{data:e.data||"",data_parsed:e.data_parsed||{},has_app:utils.getBooleanOrNull(e.has_app),identity:e.identity||null,developer_identity:e.identity||null,referring_identity:e.referring_identity||null,referring_link:e.referring_link||null}},utils.whiteListJourneysLanguageData=function(e){var t=/^\$journeys_\S+$/,n=e.data,r={};if(!n)return{};switch(typeof n){case"string":try{n=safejson.parse(n)}catch(i){n={}}break;case"object":break;default:n={}}return Object.keys(n).forEach(function(e){t.test(e)&&(r[e]=n[e])}),r},utils.getWindowLocation=function(){return utils.isIframe()?document.referrer:String(window.location)},utils.getParameterByName=function(e){e=e.replace(/[\[\]]/g,"\\$&");var t=utils.getWindowLocation();return(e=RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t))&&e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):""},utils.cleanLinkData=function(e){e.source="web-sdk";var t=e.data;switch(typeof t){case"string":try{t=safejson.parse(t)}catch(n){t={_bncNoEval:!0}}break;case"object":break;default:t={}}var r=t.$og_redirect||t.$fallback_url||t.$desktop_url;t.$canonical_url||(t.$canonical_url=utils.getWindowLocation()),t.$og_title||(t.$og_title=r?null:utils.getOpenGraphContent("title")),t.$og_description||(t.$og_description=r?null:utils.getOpenGraphContent("description")),t.$og_image_url||(t.$og_image_url=r?null:utils.getOpenGraphContent("image")),t.$og_video||(t.$og_video=r?null:utils.getOpenGraphContent("video")),t.$og_type||(t.$og_type=r?null:utils.getOpenGraphContent("type")),"string"==typeof t.$desktop_url&&(t.$desktop_url=t.$desktop_url.replace(/#r:[a-z0-9-_]+$/i,"").replace(/([\?&]_branch_match_id=\d+)/,""));try{safejson.parse(t)}catch(i){t=goog.json.serialize(t)}return e.data=t,e},utils.getClickIdAndSearchStringFromLink=function(e){function t(e){return""!==e}if(!e||"string"!=typeof e)return"";var n=document.createElement("a");return n.href=e,Array.isArray(e=n.pathname&&n.pathname.split("/").filter(t))&&e.length?e[e.length-1]+n.search:n.search},utils.processReferringLink=function(e){return e?"http"!==e.substring(0,4)?config.link_service_endpoint+e:e:null},utils.merge=function(e,t,n){if(e&&"object"==typeof e||(e={}),!t||"object"!=typeof t)return e;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n&&null==i?delete e[r]:e[r]=i}return e},utils.hashValue=function(e){try{var t=utils.getLocationHash().match(RegExp(e+":([^&]*)"));if(t&&1<=t.length)return t[1]}catch(n){}},utils.getPlatformByUserAgent=function(){var e=navigator.userAgent;return e.match(/android/i)?"android":e.match(/ipad/i)||isSafari13OrGreateriPad(e)?"ipad":e.match(/i(os|p(hone|od))/i)?"ios":e.match(/\(BB[1-9][0-9]*;/i)?"blackberry":e.match(/Windows Phone/i)?"windows_phone":e.match(/Kindle/i)||e.match(/Silk/i)||e.match(/KFTT/i)||e.match(/KFOT/i)||e.match(/KFJWA/i)||e.match(/KFJWI/i)||e.match(/KFSOWI/i)||e.match(/KFTHWA/i)||e.match(/KFTHWI/i)||e.match(/KFAPWA/i)||e.match(/KFAPWI/i)?"kindle":e.match(/(Windows|Macintosh|Linux)/i)?"desktop":"other"},utils.isSafari11OrGreater=function(){var e=navigator.userAgent;return!!isSafariBrowser(e)&&isGTEVersion(e,11)},utils.isWebKitBrowser=function(){return!!window.webkitURL},utils.isIOSWKWebView=function(){var e=navigator.userAgent;return utils.isWebKitBrowser()&&e&&isIOS(e)&&!isChromeBrowser(e)&&!isFirefoxBrowser(e)&&!isEdgeBrowser(e)&&!isOperaBrowser(e)&&!isYandexBrowser(e)},utils.getParamValue=function(e){try{var t=utils.getLocationSearch().substring(1).match(RegExp(e+"=([^&]*)"));if(t&&1<=t.length)return t[1]}catch(n){}},utils.isKey=function(e){return -1<e.indexOf("key_")},utils.snakeToCamel=function(e){return e.replace(/(\-\w)/g,function(e){return e[1].toUpperCase()})},utils.base64encode=function(e){var t,n="",r=0;e=e.replace(/\r\n/g,"\n");var i="";for(t=0;t<e.length;t++){var a=e.charCodeAt(t);128>a?i+=String.fromCharCode(a):(127<a&&2048>a?i+=String.fromCharCode(a>>6|192):(i+=String.fromCharCode(a>>12|224),i+=String.fromCharCode(a>>6&63|128)),i+=String.fromCharCode(63&a|128))}for(e=i;r<e.length;){var o=e.charCodeAt(r++);i=e.charCodeAt(r++),t=e.charCodeAt(r++),a=o>>2,o=(3&o)<<4|i>>4;var s=(15&i)<<2|t>>6,l=63&t;isNaN(i)?l=s=64:isNaN(t)&&(l=64),n=n+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)}return n},utils.base64Decode=function(e){return utils.isBase64Encoded(e)?atob(e):e},utils.isBase64Encoded=function(e){if("string"!=typeof e||""===e||""===e.trim())return!1;try{return btoa(atob(e))===e}catch(t){return!1}},utils.encodeBFPs=function(e){return e&&e.browser_fingerprint_id&&!utils.isBase64Encoded(e.browser_fingerprint_id)&&(e.browser_fingerprint_id=btoa(e.browser_fingerprint_id)),e&&e.alternative_browser_fingerprint_id&&!utils.isBase64Encoded(e.alternative_browser_fingerprint_id)&&(e.alternative_browser_fingerprint_id=btoa(e.alternative_browser_fingerprint_id)),e},utils.decodeBFPs=function(e){return e&&utils.isBase64Encoded(e.browser_fingerprint_id)&&(e.browser_fingerprint_id=atob(e.browser_fingerprint_id)),e&&utils.isBase64Encoded(e.alternative_browser_fingerprint_id)&&(e.alternative_browser_fingerprint_id=atob(e.alternative_browser_fingerprint_id)),e},utils.addEvent=function(e,t,n,r){var i=0;return"function"==typeof e.addEventListener?i=e.addEventListener(t,n,r):"function"==typeof e.attachEvent?i=e.attachEvent("on"+t,n):e["on"+t]=n,i},utils.extractDeeplinkPath=function(e){return e?(-1<e.indexOf("://")&&(e=e.split("://")[1]),e.substring(e.indexOf("/")+1)):null},utils.extractMobileDeeplinkPath=function(e){return e?(-1<e.indexOf("://")?e=e.split("://")[1]:"/"===e.charAt(0)&&(e=e.slice(1)),e):null},utils.getOpenGraphContent=function(e,t){return e=String(e),t=t||null,(e=document.querySelector('meta[property="og:'+e+'"]'))&&e.content&&(t=e.content),t},utils.prioritizeDeeplinkPaths=function(e,t){return t&&"object"==typeof t&&0!==Object.keys(t||{}).length&&(t.hostedIOS?e.$ios_deeplink_path=t.hostedIOS:t.applinksIOS?e.$ios_deeplink_path=t.applinksIOS:t.twitterIOS&&(e.$ios_deeplink_path=t.twitterIOS),t.hostedAndroid?e.$android_deeplink_path=t.hostedAndroid:t.applinksAndroid?e.$android_deeplink_path=t.applinksAndroid:t.twitterAndroid&&(e.$android_deeplink_path=t.twitterAndroid),e.hasOwnProperty("$ios_deeplink_path")&&e.hasOwnProperty("$android_deeplink_path")&&e.$ios_deeplink_path===e.$android_deeplink_path&&(e.$deeplink_path=e.$ios_deeplink_path)),e},utils.processHostedDeepLinkData=function(e){var t={};if(!e||0===e.length)return t;for(var n={hostedIOS:null,hostedAndroid:null,applinksIOS:null,applinksAndroid:null,twitterIOS:null,twitterAndroid:null},r=0;r<e.length;r++)if((e[r].getAttribute("name")||e[r].getAttribute("property"))&&e[r].getAttribute("content")){var i=e[r].getAttribute("name"),a=e[r].getAttribute("property");3===(a=(i=i||a).split(":")).length&&"branch"===a[0]&&"deeplink"===a[1]&&("$ios_deeplink_path"===a[2]?n.hostedIOS=utils.extractMobileDeeplinkPath(e[r].getAttribute("content")):"$android_deeplink_path"===a[2]?n.hostedAndroid=utils.extractMobileDeeplinkPath(e[r].getAttribute("content")):t[a[2]]=e[r].getAttribute("content")),"al:ios:url"===i&&(n.applinksIOS=utils.extractMobileDeeplinkPath(e[r].getAttribute("content"))),"twitter:app:url:iphone"===i&&(n.twitterIOS=utils.extractMobileDeeplinkPath(e[r].getAttribute("content"))),"al:android:url"===i&&(n.applinksAndroid=utils.extractMobileDeeplinkPath(e[r].getAttribute("content"))),"twitter:app:url:googleplay"===i&&(n.twitterAndroid=utils.extractMobileDeeplinkPath(e[r].getAttribute("content")))}return utils.prioritizeDeeplinkPaths(t,n)},utils.getHostedDeepLinkData=function(){var e=document.getElementsByTagName("meta");return utils.processHostedDeepLinkData(e)},utils.getBrowserLanguageCode=function(){try{if(navigator.languages&&0<navigator.languages.length)var e=navigator.languages[0];else navigator.language&&(e=navigator.language);e=e.substring(0,2).toUpperCase()}catch(t){e=null}return e},utils.calculateDiffBetweenArrays=function(e,t){var n=[];return t.forEach(function(t){-1===e.indexOf(t)&&n.push(t)}),n};var validCommerceEvents=["purchase"],commerceEventMessages={missingPurchaseEvent:"event name is either missing, of the wrong type or not valid. Please specify 'purchase' as the event name.",missingCommerceData:"commerce_data is either missing, of the wrong type or empty. Please ensure that commerce_data is constructed correctly.",invalidKeysForRoot:"Please remove the following keys from the root of commerce_data: ",invalidKeysForProducts:"Please remove the following keys from commerce_data.products: ",invalidProductListType:"commerce_data.products must be an array of objects",invalidProductType:"Each product in the products list must be an object"},validateCommerceDataKeys=function(e){var t="sku name price quantity brand category variant".split(" "),n=utils.calculateDiffBetweenArrays("common type transaction_id currency revenue revenue_in_usd exchange_rate shipping tax coupon affiliation persona products".split(" "),Object.keys(e));if(n.length)return commerceEventMessages.invalidKeysForRoot+n.join(", ");var r,i=[];if(e.hasOwnProperty("products")){if(!Array.isArray(e.products))return commerceEventMessages.invalidProductListType;if(e.products.forEach(function(e){"object"!=typeof e&&(r=commerceEventMessages.invalidProductType),i=i.concat(utils.calculateDiffBetweenArrays(t,Object.keys(e)))}),r)return r;if(i.length)return commerceEventMessages.invalidKeysForProducts+i.join(", ")}return null};utils.validateCommerceEventParams=function(e,t){return e&&"string"==typeof e&&-1!==validCommerceEvents.indexOf(e.toLowerCase())?t&&"object"==typeof t&&0!==Object.keys(t||{}).length?(e=validateCommerceDataKeys(t))?e:null:commerceEventMessages.missingCommerceData:commerceEventMessages.missingPurchaseEvent},utils.cleanBannerText=function(e){return"string"!=typeof e?null:e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},utils.getTitle=function(){var e=document.getElementsByTagName("title");return 0<e.length?e[0].innerText:null},utils.getDescription=function(){var e=document.querySelector('meta[name="description"]');return e&&e.content?e.content:null},utils.getCanonicalURL=function(){var e=document.querySelector('link[rel="canonical"]');return e&&e.href?e.href:null},utils.addPropertyIfNotNull=function(e,t,n){if(null!=n){if("object"==typeof n&&0===Object.keys(n||{}).length)return e;e[t]=n}return e},utils.openGraphDataAsObject=function(){var e={};return e=utils.addPropertyIfNotNull(e,"$og_title",utils.getOpenGraphContent("title")),e=utils.addPropertyIfNotNull(e,"$og_description",utils.getOpenGraphContent("description")),e=utils.addPropertyIfNotNull(e,"$og_image_url",utils.getOpenGraphContent("image")),e=utils.addPropertyIfNotNull(e,"$og_video",utils.getOpenGraphContent("video")),(e=utils.addPropertyIfNotNull(e,"$og_type",utils.getOpenGraphContent("type")))&&0<Object.keys(e).length?e:null},utils.getAdditionalMetadata=function(){var e={};return e=utils.addPropertyIfNotNull(e,"og_data",utils.openGraphDataAsObject()),e=utils.addPropertyIfNotNull(e,"hosted_deeplink_data",utils.getHostedDeepLinkData()),e=utils.addPropertyIfNotNull(e,"title",utils.getTitle()),e=utils.addPropertyIfNotNull(e,"description",utils.getDescription()),(e=utils.addPropertyIfNotNull(e,"canonical_url",utils.getCanonicalURL()))&&0<Object.keys(e).length?e:{}},utils.removePropertiesFromObject=function(e,t){if(e&&"object"==typeof e&&!Array.isArray(e)&&0<Object.keys(e).length&&t&&Array.isArray(t)&&0<t.length)for(var n in e)e.hasOwnProperty(n)&&-1<t.indexOf(n)&&delete e[n]};var BRANCH_STANDARD_EVENTS="ADD_TO_CART ADD_TO_WISHLIST VIEW_CART INITIATE_PURCHASE ADD_PAYMENT_INFO PURCHASE SPEND_CREDITS SEARCH VIEW_ITEM VIEW_ITEMS RATE SHARE COMPLETE_REGISTRATION COMPLETE_TUTORIAL ACHIEVE_LEVEL UNLOCK_ACHIEVEMENT LOGIN SUBSCRIBE START_TRIAL INVITE RESERVE VIEW_AD CLICK_AD INITIATE_STREAM COMPLETE_STREAM".split(" "),BRANCH_STANDARD_EVENT_DATA="transaction_id revenue currency shipping tax coupon affiliation search_query description".split(" ");utils.isStandardEvent=function(e){return e&&-1<BRANCH_STANDARD_EVENTS.indexOf(e)},utils.separateEventAndCustomData=function(e){if(!e||0===Object.keys(e).length)return null;for(var t=utils.calculateDiffBetweenArrays(BRANCH_STANDARD_EVENT_DATA,Object.keys(e)),n={},r=0;r<t.length;r++){var i=t[r];n[i]=e[i],delete e[i]}return{custom_data:utils.convertObjectValuesToString(n),event_data:e}},utils.validateParameterType=function(e,t){return!!t&&(null!==e||"object"!==t)&&("array"===t?Array.isArray(e):typeof e===t&&!Array.isArray(e))},utils.getScreenHeight=function(){return screen.height||0},utils.getScreenWidth=function(){return screen.width||0},utils.getUserData=function(e){var t={};return t=utils.addPropertyIfNotNull(t,"http_origin",document.URL),t=utils.addPropertyIfNotNull(t,"user_agent",navigator.userAgent),t=utils.addPropertyIfNotNull(t,"language",utils.getBrowserLanguageCode()),t=utils.addPropertyIfNotNull(t,"screen_width",utils.getScreenWidth()),t=utils.addPropertyIfNotNull(t,"screen_height",utils.getScreenHeight()),t=utils.addPropertyIfNotNull(t,"http_referrer",document.referrer),t=utils.addPropertyIfNotNull(t,"browser_fingerprint_id",e.browser_fingerprint_id),t=utils.addPropertyIfNotNull(t,"developer_identity",e.identity),t=utils.addPropertyIfNotNull(t,"identity",e.identity),t=utils.addPropertyIfNotNull(t,"sdk","web"),t=utils.addPropertyIfNotNull(t,"sdk_version",config.version),t=utils.addPropertyIfNotNullorEmpty(t,"model",utils.userAgentData?utils.userAgentData.model:""),utils.addPropertyIfNotNullorEmpty(t,"os_version",utils.userAgentData?utils.userAgentData.platformVersion:"")},utils.isIframe=function(){return window.self!==window.top},utils.isSameOriginFrame=function(){var e="true";try{window.top.location.search&&(e="true")}catch(t){return!1}return"true"===e},utils.isIframeAndFromSameOrigin=function(){return utils.isIframe()&&utils.isSameOriginFrame()},utils.getInitialReferrer=function(e){return e||(utils.isIframe()?utils.isSameOriginFrame()?window.top.document.referrer:"":document.referrer)},utils.getCurrentUrl=function(){return utils.isIframeAndFromSameOrigin()?window.top.location.href:window.location.href},utils.convertValueToString=function(e){return utils.validateParameterType(e,"object")||utils.validateParameterType(e,"array")?safejson.stringify(e):null===e?"null":e.toString()},utils.convertObjectValuesToString=function(e){if(!utils.validateParameterType(e,"object")||0===Object.keys(e).length)return{};for(var t in e)e.hasOwnProperty(t)&&(e[t]=utils.convertValueToString(e[t]));return e},utils.mergeHostedDeeplinkData=function(e,t){return e=e?utils.merge({},e):{},t&&0<Object.keys(t).length?0<Object.keys(e).length?utils.merge(e,t):utils.merge({},t):e},utils.addNonceAttribute=function(e){""!==utils.nonce&&e.setAttribute("nonce",utils.nonce)},utils.getBooleanOrNull=function(e){return void 0===e?null:e},utils.delay=function(e,t){isNaN(t)||0>=t?e():setTimeout(e,t)},utils.getClientHints=function(){navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(["model","platformVersion"]).then(function(e){utils.userAgentData={model:e.model,platformVersion:utils.removeTrailingDotZeros(e.platformVersion)}}):utils.userAgentData=null},utils.addPropertyIfNotNullorEmpty=function(e,t,n){return"string"==typeof n&&n&&(e[t]=n),e},utils.removeTrailingDotZeros=function(e){if(e){var t=/^([1-9]\d*)\.(0\d*)(\.[0]\d*){1,}$/;if(-1!==e.indexOf(".")){var n=e.substring(0,e.indexOf("."));e=e.replace(t,n)}}return e},utils.shouldAddDMAParams=function(e){return utils.allowDMAParamURLMap.hasOwnProperty(e)},utils.setDMAParams=function(e,t={},n){t={dma_eea:t.eeaRegion||!1,dma_ad_personalization:t.adPersonalizationConsent||!1,dma_ad_user_data:t.adUserDataUsageConsent||!1};let r=utils.allowDMAParamURLMap;for(let[i,a]of Object.entries(r))if(n.includes(i)){if(""===a)Object.assign(e,t);else{let o;if(a in e&&""!==e[a])try{let s=JSON.parse(e[a]),l=Object.assign({},s,t);o=JSON.stringify(l)}catch(d){console.error(`setDMAParams:: ${a} is not a valid JSON string`)}else o=JSON.stringify(t);o&&(e[a]=o)}break}},utils.isValidURL=function(e){return!!e&&""!==e.trim()&&RegExp("^(https?)://((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)};var _validator,resources={},validationTypes={OBJECT:0,STRING:1,NUMBER:2,ARRAY:3,BOOLEAN:4};function validator(e,t){return function(n,r,i){if(utils.userPreferences.trackingDisabled)return!1;if("number"==typeof i||i){if(t===validationTypes.OBJECT){if("object"!=typeof i)return utils.message(utils.messages.invalidType,[n,r,"an object"])}else if(t===validationTypes.ARRAY){if(!(i instanceof Array))return utils.message(utils.messages.invalidType,[n,r,"an array"])}else if(t===validationTypes.NUMBER){if("number"!=typeof i)return utils.message(utils.messages.invalidType,[n,r,"a number"])}else if(t===validationTypes.BOOLEAN){if("boolean"!=typeof i)return utils.message(utils.messages.invalidType,[n,r,"a boolean"])}else{if("string"!=typeof i)return utils.message(utils.messages.invalidType,[n,r,"a string"]);if(t!==validationTypes.STRING&&!t.test(i))return utils.message(utils.messages.invalidType,[n,r,"in the proper format"])}}else if(e)return utils.message(utils.messages.missingParam,[n,r]);return!1}}function defaults(e){var t={browser_fingerprint_id:validator(!0,validationTypes.STRING),identity_id:validator(!0,validationTypes.STRING),sdk:validator(!0,validationTypes.STRING),session_id:validator(!0,validationTypes.STRING)};return utils.merge(e,t)}resources.open={destination:config.api_endpoint,endpoint:"/v1/open",method:utils.httpMethod.POST,params:{browser_fingerprint_id:validator(!1,validationTypes.STRING),alternative_browser_fingerprint_id:validator(!1,validationTypes.STRING),identity_id:validator(!1,validationTypes.STRING),identity:validator(!1,validationTypes.STRING),link_identifier:validator(!1,validationTypes.STRING),sdk:validator(!1,validationTypes.STRING),options:validator(!1,validationTypes.OBJECT),initial_referrer:validator(!1,validationTypes.STRING),tracking_disabled:validator(!1,validationTypes.BOOLEAN),current_url:validator(!1,validationTypes.STRING),screen_height:validator(!1,validationTypes.NUMBER),screen_width:validator(!1,validationTypes.NUMBER),model:validator(!1,validationTypes.STRING),os_version:validator(!1,validationTypes.STRING)}},resources._r={destination:config.app_service_endpoint,endpoint:"/_r",method:utils.httpMethod.GET,jsonp:!0,params:{sdk:validator(!0,validationTypes.STRING),_t:validator(!1,validationTypes.STRING),branch_key:validator(!0,validationTypes.STRING)}},resources.linkClick={destination:"",endpoint:"",method:utils.httpMethod.GET,queryPart:{link_url:validator(!0,validationTypes.STRING)},params:{click:validator(!0,validationTypes.STRING)}},resources.link={destination:config.api_endpoint,endpoint:"/v1/url",method:utils.httpMethod.POST,ref:"obj",params:defaults({alias:validator(!1,validationTypes.STRING),campaign:validator(!1,validationTypes.STRING),channel:validator(!1,validationTypes.STRING),data:validator(!1,validationTypes.STRING),feature:validator(!1,validationTypes.STRING),identity_id:validator(!0,validationTypes.STRING),stage:validator(!1,validationTypes.STRING),tags:validator(!1,validationTypes.ARRAY),type:validator(!1,validationTypes.NUMBER),source:validator(!1,validationTypes.STRING),instrumentation:validator(!1,validationTypes.STRING)})},resources.qrCode={destination:config.api_endpoint,endpoint:"/v1/qr-code",method:utils.httpMethod.POST,ref:"obj",params:defaults({alias:validator(!1,validationTypes.STRING),campaign:validator(!1,validationTypes.STRING),channel:validator(!1,validationTypes.STRING),data:validator(!1,validationTypes.STRING),qr_code_settings:validator(!1,validationTypes.STRING),feature:validator(!1,validationTypes.STRING),identity_id:validator(!0,validationTypes.STRING),stage:validator(!1,validationTypes.STRING),tags:validator(!1,validationTypes.ARRAY),type:validator(!1,validationTypes.NUMBER),source:validator(!1,validationTypes.STRING)})},resources.deepview={destination:config.api_endpoint,endpoint:"/v1/deepview",jsonp:!0,method:utils.httpMethod.POST,params:defaults({campaign:validator(!1,validationTypes.STRING),_t:validator(!1,validationTypes.STRING),channel:validator(!1,validationTypes.STRING),data:validator(!0,validationTypes.STRING),feature:validator(!1,validationTypes.STRING),link_click_id:validator(!1,validationTypes.STRING),open_app:validator(!1,validationTypes.BOOLEAN),append_deeplink_path:validator(!1,validationTypes.BOOLEAN),stage:validator(!1,validationTypes.STRING),tags:validator(!1,validationTypes.ARRAY),deepview_type:validator(!0,validationTypes.STRING),source:validator(!0,validationTypes.STRING)})},resources.logStandardEvent={destination:config.api_endpoint,endpoint:"/v2/event/standard",method:utils.httpMethod.POST,params:{name:validator(!0,validationTypes.STRING),user_data:validator(!0,validationTypes.STRING),custom_data:validator(!1,validationTypes.STRING),event_data:validator(!1,validationTypes.STRING),content_items:validator(!1,validationTypes.STRING),customer_event_alias:validator(!1,validationTypes.STRING)}},resources.logCustomEvent={destination:config.api_endpoint,endpoint:"/v2/event/custom",method:utils.httpMethod.POST,params:{name:validator(!0,validationTypes.STRING),user_data:validator(!0,validationTypes.STRING),custom_data:validator(!1,validationTypes.STRING),event_data:validator(!1,validationTypes.STRING),content_items:validator(!1,validationTypes.STRING),customer_event_alias:validator(!1,validationTypes.STRING)}},resources.pageview={destination:config.api_endpoint,endpoint:"/v1/pageview",method:utils.httpMethod.POST,params:defaults({event:validator(!0,validationTypes.STRING),metadata:validator(!1,validationTypes.OBJECT),initial_referrer:validator(!1,validationTypes.STRING),tracking_disabled:validator(!1,validationTypes.BOOLEAN),branch_view_id:validator(!1,validationTypes.STRING),no_journeys:validator(!1,validationTypes.BOOLEAN),user_language:validator(!1,validationTypes.STRING),open_app:validator(!1,validationTypes.BOOLEAN),has_app_websdk:validator(!1,validationTypes.BOOLEAN),source:validator(!1,validationTypes.STRING),feature:validator(!1,validationTypes.STRING),is_iframe:validator(!1,validationTypes.BOOLEAN),data:validator(!1,validationTypes.OBJECT),callback_string:validator(!1,validationTypes.STRING),journey_displayed:validator(!1,validationTypes.BOOLEAN),audience_rule_id:validator(!1,validationTypes.STRING),journey_dismissals:validator(!1,validationTypes.OBJECT),identity_id:validator(!1,validationTypes.STRING),identity:validator(!0,validationTypes.STRING),session_referring_link_data:validator(!1,validationTypes.STRING),session_link_click_id:validator(!1,validationTypes.STRING)})},resources.dismiss={destination:config.api_endpoint,endpoint:"/v1/dismiss",method:utils.httpMethod.POST,params:defaults({event:validator(!0,validationTypes.STRING),metadata:validator(!1,validationTypes.OBJECT),initial_referrer:validator(!1,validationTypes.STRING),tracking_disabled:validator(!1,validationTypes.BOOLEAN),branch_view_id:validator(!1,validationTypes.STRING),no_journeys:validator(!1,validationTypes.BOOLEAN),user_language:validator(!1,validationTypes.STRING),open_app:validator(!1,validationTypes.BOOLEAN),has_app_websdk:validator(!1,validationTypes.BOOLEAN),source:validator(!1,validationTypes.STRING),feature:validator(!1,validationTypes.STRING),is_iframe:validator(!1,validationTypes.BOOLEAN),data:validator(!1,validationTypes.OBJECT),callback_string:validator(!1,validationTypes.STRING),journey_displayed:validator(!1,validationTypes.BOOLEAN),audience_rule_id:validator(!1,validationTypes.STRING),journey_dismissals:validator(!1,validationTypes.OBJECT),dismissal_source:validator(!1,validationTypes.STRING)})},resources.crossPlatformIds={destination:config.api_endpoint,endpoint:"/v1/cpid",method:utils.httpMethod.POST,params:{user_data:validator(!0,validationTypes.STRING)}},resources.lastAttributedTouchData={destination:config.api_endpoint,endpoint:"/v1/cpid/latd",method:utils.httpMethod.POST,params:{user_data:validator(!0,validationTypes.STRING)}};var storage={},COOKIE_MS=31536e6,BRANCH_KEY_PREFIX="BRANCH_WEBSDK_KEY";storage.BranchStorage=function(e){for(var t=0;t<e.length;t++){var n=this[e[t]];if((n="function"==typeof n?n():n).isEnabled())return n._store={},n}};var prefix=function(e){return"branch_session"===e||"branch_session_first"===e?e:BRANCH_KEY_PREFIX+e},trimPrefix=function(e){return e.replace(BRANCH_KEY_PREFIX,"")},retrieveValue=function(e){return"true"===e||"false"!==e&&e},hasBranchPrefix=function(e){return 0===e.indexOf(BRANCH_KEY_PREFIX)},isBranchCookie=function(e){return"branch_session"===e||"branch_session_first"===e||hasBranchPrefix(e)},processCookie=function(e){var t=(e=e.trim()).indexOf("=");return{name:e.substring(0,t),value:retrieveValue(e.substring(t+1,e.length))}},webStorage=function(e){try{var t=e&&localStorage?localStorage:sessionStorage}catch(n){return{isEnabled:function(){return!1}}}return{getAll:function(){if(void 0===t)return null;var e,n=null;for(e in t)0===e.indexOf(BRANCH_KEY_PREFIX)&&(null===n&&(n={}),n[trimPrefix(e)]=retrieveValue(t.getItem(e)));return utils.decodeBFPs(n)},get:function(e,n){return"browser_fingerprint_id"===e||"alternative_browser_fingerprint_id"===e?n&&localStorage?utils.base64Decode(localStorage.getItem(prefix(e))):utils.base64Decode(t.getItem(prefix(e))):retrieveValue(n&&localStorage?localStorage.getItem(prefix(e)):t.getItem(prefix(e)))},set:function(e,n,r){r&&localStorage?localStorage.setItem(prefix(e),n):t.setItem(prefix(e),n)},remove:function(e,n){n&&localStorage?localStorage.removeItem(prefix(e)):t.removeItem(prefix(e))},clear:function(){Object.keys(t).forEach(function(e){0===e.indexOf(BRANCH_KEY_PREFIX)&&t.removeItem(e)})},isEnabled:function(){try{return t.setItem("test",""),t.removeItem("test"),!0}catch(e){return!1}}}};storage.BranchStorage.prototype.local=function(){return webStorage(!0)},storage.BranchStorage.prototype.session=function(){return webStorage(!1)};var cookies=function(){var e=function(e,t){t&&(e=prefix(e)),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"};return{getAll:function(){for(var e={},t=document.cookie.split(";"),n=0;n<t.length;n++){var r=processCookie(t[n]);r&&r.hasOwnProperty("name")&&r.hasOwnProperty("value")&&isBranchCookie(r.name)&&(e[trimPrefix(r.name)]=r.value)}return e},get:function(e){e=prefix(e);for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=processCookie(t[n]);if(r&&r.hasOwnProperty("name")&&r.hasOwnProperty("value")&&r.name===e)return r.value}return null},set:function(e,t){e=prefix(e),document.cookie=e+"="+t+"; path=/"},remove:function(t){e(t,!0)},clear:function(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=processCookie(t[n]);r&&r.hasOwnProperty("name")&&isBranchCookie(r.name)&&e(r.name,!1)}},isEnabled:function(){return navigator.cookieEnabled}}};storage.BranchStorage.prototype.cookie=function(){return cookies()},storage.BranchStorage.prototype.pojo={getAll:function(){return this._store},get:function(e){return this._store[e]||null},set:function(e,t){this._store[e]=t},remove:function(e){delete this._store[e]},clear:function(){this._store={}},isEnabled:function(){return!0}};var Server=function(){};Server.prototype._jsonp_callback_index=0,Server.prototype.serializeObject=function(e,t){if(void 0===e)return"";var n=[];if(e instanceof Array){for(var r=0;r<e.length;r++)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[r]));return n.join("&")}for(r in e)e.hasOwnProperty(r)&&(e[r]instanceof Array||"object"==typeof e[r]?n.push(this.serializeObject(e[r],t?t+"."+r:r)):n.push(encodeURIComponent(t?t+"."+r:r)+"="+encodeURIComponent(e[r])));return n.join("&")},Server.prototype.getUrl=function(e,t){var n,r=e.destination+e.endpoint,i=/^[0-9]{15,20}$/,a=/key_(live|test)_[A-Za-z0-9]{32}/;if(void 0!==e.queryPart){for(s in e.queryPart)if(e.queryPart.hasOwnProperty(s)){if(n="function"==typeof e.queryPart[s]?e.queryPart[s](e.endpoint,s,t[s]):n)return{error:n};r+="/"+t[s]}}var o={};if(void 0!==e.params&&"/v1/pageview"!==e.endpoint&&"/v1/dismiss"!==e.endpoint){for(s in e.params)if(e.params.hasOwnProperty(s)){if(n=e.params[s](e.endpoint,s,t[s]))return{error:n};void 0!==(n=t[s])&&""!==n&&null!==n&&(o[s]=n)}}else("/v1/pageview"===e.endpoint||"/v1/dismiss"===e.endpoint)&&(utils.merge(o,t),o.branch_requestMetadata&&delete o.branch_requestMetadata);if(t.hasOwnProperty("branch_requestMetadata")&&t.branch_requestMetadata&&"/v1/pageview"!==e.endpoint&&"/v1/dismiss"!==e.endpoint&&(o.metadata=safejson.stringify(t.branch_requestMetadata)),t.branch_dma_data&&(utils.setDMAParams(o,t.branch_dma_data,e.endpoint),o.branch_dma_data&&delete o.branch_dma_data),"POST"===e.method)try{var s=o;if(void 0===s&&(s={}),t.branch_key&&a.test(t.branch_key))s.branch_key=t.branch_key;else if(t.app_id&&i.test(t.app_id))s.app_id=t.app_id;else if(t.instrumentation)s.instrumentation=t.instrumentation;else throw Error(utils.message(utils.messages.missingParam,[e.endpoint,"branch_key or app_id"]))}catch(l){return{error:l.message}}return("/v1/pageview"===e.endpoint||"/v1/dismiss"===e.endpoint)&&o.metadata&&(o.metadata=safejson.stringify(o.metadata||{})),"/v1/open"===e.endpoint&&(o.options=safejson.stringify(o.options||{})),{data:this.serializeObject(o,""),url:r.replace(/^\//,"")}},Server.prototype.createScript=function(e,t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,utils.addNonceAttribute(r),(e=document.getElementsByTagName("head"))&&!(1>e.length)?(e[0].appendChild(r),"function"==typeof t&&utils.addEvent(r,"error",t),"function"==typeof n&&utils.addEvent(r,"load",n)):"function"==typeof t&&t()},Server.prototype.jsonpRequest=function(e,t,n,r){var i=Date.now(),a=utils.currentRequestBrttTag;0===this._jsonp_callback_index&&utils.isSafari11OrGreater()&&this._jsonp_callback_index++;var o="branch_callback__"+this._jsonp_callback_index++,s=0<=e.indexOf("branch.io")?"&data=":"&post_data=";t="POST"===n?encodeURIComponent(utils.base64encode(goog.json.serialize(t))):"";var l=window.setTimeout(function(){window[o]=function(){},utils.addPropertyIfNotNull(utils.instrumentation,a,utils.calculateBrtt(i)),r(Error(utils.messages.timeout),null,504)},utils.timeout);window[o]=function(e){window.clearTimeout(l),r(null,e)},this.createScript(e+(0>e.indexOf("?")?"?":"")+(t?s+t:"")+(0<=e.indexOf("/c/")?"&click=1":"")+"&callback="+o,function(){r(Error(utils.messages.blockedByClient),null)},function(){utils.addPropertyIfNotNull(utils.instrumentation,a,utils.calculateBrtt(i));try{"function"==typeof this.remove?this.remove():this.parentNode.removeChild(this)}catch(e){}delete window[o]})},Server.prototype.XHRRequest=function(e,t,n,r,i,a,o){var s=Date.now(),l=utils.currentRequestBrttTag,d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o&&(d.responseType=o),d.ontimeout=function(){utils.addPropertyIfNotNull(utils.instrumentation,l,utils.calculateBrtt(s)),i(Error(utils.messages.timeout),null,504)},d.onerror=function(e){i(Error(e.error||"Error in API: "+d.status),null,d.status)},d.onreadystatechange=function(){if(4===d.readyState){if(utils.addPropertyIfNotNull(utils.instrumentation,l,utils.calculateBrtt(s)),200===d.status){if("arraybuffer"===d.responseType)var e=d.response;else if(a)e=d.responseText;else try{e=safejson.parse(d.responseText)}catch(t){e={}}i(null,e,d.status)}else("4"===d.status.toString().substring(0,1)||"5"===d.status.toString().substring(0,1))&&(d.responseURL&&d.responseURL.includes("v2/event")?i(d.responseText,null,d.status):i(Error("Error in API: "+d.status),null,d.status))}};try{d.open(n,e,!0),d.timeout=utils.timeout,d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(t)}catch(c){r.set("use_jsonp",!0),this.jsonpRequest(e,t,n,i)}},Server.prototype.request=function(e,t,n,r){var i=this;if(utils.currentRequestBrttTag="/v1/pageview"===e.endpoint&&t&&t.journey_displayed?e.endpoint+"-1-brtt":e.endpoint+"-brtt","/v1/url"===e.endpoint&&1<Object.keys(utils.instrumentation).length&&(delete utils.instrumentation["-brtt"],t.instrumentation=safejson.stringify(utils.merge({},utils.instrumentation)),utils.instrumentation={}),utils.userPreferences.trackingDisabled)for(var a=["browser_fingerprint_id","alternative_browser_fingerprint_id","identity_id","session_id","identity"],o=0;o<a.length;o++)t.hasOwnProperty(a[o])&&delete t[a[o]];if((a=this.getUrl(e,t)).error)return r(Error(safejson.stringify({message:a.error,endpoint:e.endpoint,data:t})));var s="";if("GET"===e.method)var l=a.url+"?"+a.data;else l=a.url,s=a.data;var d=n.get("use_jsonp")||e.jsonp?t:s,c=utils.retries,u=function(t,n,a){"function"==typeof i.onAPIResponse&&i.onAPIResponse(l,e.method,d,t,a,n),t&&0<c&&"5"===(a||"").toString().substring(0,1)?(c--,window.setTimeout(function(){h()},utils.retry_delay)):r(t,n)};if(utils.userPreferences.trackingDisabled&&utils.userPreferences.shouldBlockRequest(l,t))return utils.userPreferences.allowErrorsInCallback?u(Error(utils.messages.trackingDisabled),null,300):u(null,{},200);var p=!1;if("/v1/qr-code"===e.endpoint){p=!0;var f="arraybuffer"}var h=function(){n.get("use_jsonp")||e.jsonp?i.jsonpRequest(l,t,e.method,u):i.XHRRequest(l,s,e.method,n,u,p,f)};h()};var banner_utils={animationSpeed:250,animationDelay:20,bannerHeight:"76px",error_timeout:2e3,removeElement:function(e){e&&e.parentNode.removeChild(e)},hasClass:function(e,t){return!!e.className.match(RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e&&!banner_utils.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){e&&banner_utils.hasClass(e,t)&&(e.className=e.className.replace(RegExp("(\\s|^)"+t+"(\\s|$)")," "))},getDate:function(e){var t=new Date;return t.setDate(t.getDate()+e)},getBodyStyle:function(e){return document.body.currentStyle?document.body.currentStyle[utils.snakeToCamel(e)]:window.getComputedStyle(document.body).getPropertyValue(e)},addCSSLengths:function(e,t){var n=function(e){if(!e)return 0;var t=e.replace(/[0-9,\.]/g,""),r=parseInt(0<(e=e.match(/\d+/g)).length?e[0]:"0",10),i=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)/100},a=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)/100};return parseInt(({px:function(e){return e},em:function(e){return document.body.currentStyle?e*n(document.body.currentStyle.fontSize):e*parseFloat(window.getComputedStyle(document.body).fontSize)},rem:function(e){return document.documentElement.currentStyle?e*n(document.documentElement.currentStyle.fontSize):e*parseFloat(window.getComputedStyle(document.documentElement).fontSize)},vw:function(e){return e*i()},vh:function(e){return e*a()},vmin:function(e){return e*Math.min(a(),i())},vmax:function(e){return e*Math.max(a(),i())},"%":function(){return document.body.clientWidth/100*r}})[t](r),10)};return(n(e)+n(t)).toString()+"px"},shouldAppend:function(e,t){if(e=e.get("hideBanner",!0),t.respectDNT&&navigator&&Number(navigator.doNotTrack))return!1;try{"string"==typeof e&&(e=safejson.parse(e))}catch(n){e=!1}e="number"==typeof e?new Date>=new Date(e):!e;var r=t.forgetHide;return"number"==typeof r&&(r=!1),!document.getElementById("branch-banner")&&!document.getElementById("branch-banner-iframe")&&(e||r)&&(t.showAndroid&&"android"===utils.getPlatformByUserAgent()||t.showiPad&&"ipad"===utils.getPlatformByUserAgent()||t.showiOS&&"ios"===utils.getPlatformByUserAgent()||t.showBlackberry&&"blackberry"===utils.getPlatformByUserAgent()||t.showWindowsPhone&&"windows_phone"===utils.getPlatformByUserAgent()||t.showKindle&&"kindle"===utils.getPlatformByUserAgent())}},banner_css={banner:function(e){return".branch-banner-is-active { -webkit-transition: all "+1.5*banner_utils.animationSpeed/1e3+"s ease; transition: all 0"+1.5*banner_utils.animationSpeed/1e3+"s ease; }\n#branch-banner { width:100%; z-index: 99999; font-family: Helvetica Neue, Sans-serif; -webkit-font-smoothing: antialiased; -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all "+banner_utils.animationSpeed/1e3+"s ease; transition: all 0"+banner_utils.animationSpeed/1e3+"s ease; }\n#branch-banner .button{ border: 1px solid "+(e.buttonBorderColor||("dark"===e.theme?"transparent":"#ccc"))+"; background: "+(e.buttonBackgroundColor||"#fff")+"; color: "+(e.buttonFontColor||"#000")+"; cursor: pointer; margin-top: 0px; font-size: 14px; display: inline-block; margin-left: 5px; font-weight: 400; text-decoration: none;  border-radius: 4px; padding: 6px 12px; transition: all .2s ease;}\n#branch-banner .button:hover {  border: 1px solid "+(e.buttonBorderColorHover||("dark"===e.theme?"transparent":"#BABABA"))+"; background: "+(e.buttonBackgroundColorHover||"#E0E0E0")+"; color: "+(e.buttonFontColorHover||"#000")+";}\n#branch-banner .button:focus { outline: none; }\n#branch-banner * { margin-right: 4px; position: relative; line-height: 1.2em; }\n#branch-banner-close { font-weight: 400; cursor: pointer; float: left; z-index: 2;padding: 0 5px 0 5px; margin-right: 0; }\n#branch-banner .content { width:100%; overflow: hidden; height: "+banner_utils.bannerHeight+"; background: rgba(255, 255, 255, 0.95); color: #333; "+("top"===e.position?"border-bottom":"border-top")+': 1px solid #ddd; }\n#branch-banner-close { color: #000; font-size: 24px; top: 14px; opacity: .5; transition: opacity .3s ease; }\n#branch-banner-close:hover { opacity: 1; }\n#branch-banner .title { font-size: 18px; font-weight:bold; color: #555; }\n#branch-banner .description { font-size: 12px; font-weight: normal; color: #777; max-height: 30px; overflow: hidden; }\n#branch-banner .icon { float: left; padding-bottom: 40px; margin-right: 10px; margin-left: 5px; }\n#branch-banner .icon img { width: 63px; height: 63px; margin-right: 0; }\n#branch-banner .reviews { font-size:13px; margin: 1px 0 3px 0; color: #777; }\n#branch-banner .reviews .star { display:inline-block; position: relative; margin-right:0; }\n#branch-banner .reviews .star span { display: inline-block; margin-right: 0; color: #555; position: absolute; top: 0; left: 0; }\n#branch-banner .reviews .review-count { font-size:10px; }\n#branch-banner .reviews .star .half { width: 50%; overflow: hidden; display: block; }\n#branch-banner .content .left { padding: 6px 5px 6px 5px; }\n#branch-banner .vertically-align-middle { top: 50%; transform: translateY(-50%); -webkit-transform: translateY(-50%); -ms-transform: translateY(-50%); }\n#branch-banner .details > * { display: block; }\n#branch-banner .content .left { height: 63px; }\n#branch-banner .content .right { float: right; height: 63px; margin-bottom: 50px; padding-top: 22px; z-index: 1; }\n#branch-banner .right > div { float: left; }\n#branch-banner-action { top: 17px; }\n#branch-banner .content:after { content: ""; position: absolute; left: 0; right: 0; top: 100%; height: 1px; background: rgba(0, 0, 0, 0.2); }\n#branch-banner .theme-dark.content { background: rgba(51, 51, 51, 0.95); }\n#branch-banner .theme-dark #branch-banner-close{ color: #fff; text-shadow: 0 1px 1px rgba(0, 0, 0, .15); }\n#branch-banner .theme-dark .details { text-shadow: 0 1px 1px rgba(0, 0, 0, .15); }\n#branch-banner .theme-dark .title { color: #fff; }\n#branch-banner .theme-dark .description { color: #fff; }\n#branch-banner .theme-dark .reviews { color: #888; }\n#branch-banner .theme-dark .reviews .star span{ color: #fff; }\n#branch-banner .theme-dark .reviews .review-count{ color: #fff; }\n'},other:"#branch-banner { position: fixed; min-width: 600px; }\n#branch-banner input{ border: 1px solid #ccc;  font-weight: 400;  border-radius: 4px; height: 30px; padding: 5px 7px 4px; width: 145px; font-size: 14px;}\n#branch-banner input:focus { outline: none; }\n#branch-banner input.error { color: rgb(194, 0, 0); border-color: rgb(194, 0, 0); }\n#branch-banner .branch-icon-wrapper { width:25px; height: 25px; vertical-align: middle; display: inline-block; margin-top: -18px; }\n@keyframes branch-spinner { 0% { transform: rotate(0deg); -webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); } 100% { transform: rotate(360deg); -webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); } }\n@-webkit-keyframes branch-spinner { 0% { transform: rotate(0deg); -webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); } 100% { transform: rotate(360deg); -webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); } }\n#branch-spinner { -webkit-animation: branch-spinner 1s ease-in-out infinite; animation: branch-spinner 1s ease-in-out infinite; transition: all 0.7s ease-in-out; border:2px solid #ddd; border-bottom-color:#428bca; width:80%; height:80%; border-radius:50%; -webkit-font-smoothing: antialiased !important; }\n#branch-banner .theme-dark input { border-color: transparent; }\n",mobile:"#branch-banner { position: absolute; }\n#branch-banner .content .left .details .title { font-size: 12px; }\n#branch-mobile-action { white-space: nowrap; }\n#branch-banner .content .left .details .description { font-size: 11px; font-weight: normal; }\n@media only screen and (min-device-width: 320px) and (max-device-width: 350px) { #branch-banner .content .right { max-width: 120px; } }\n@media only screen and (min-device-width: 351px) and (max-device-width: 400px) and (orientation: landscape) { #branch-banner .content .right { max-width: 150px; } }\n@media only screen and (min-device-width: 401px) and (max-device-width: 480px) and (orientation: landscape) { #branch-banner .content .right { max-width: 180px; } }\n",ios:"",android:"#branch-banner #branch-banner-close,#branch-banner .theme-dark #branch-banner-close { height:17px; width: 17px; text-align: center; font-size: 15px; top: 24px;  border-radius:14px; border:0; line-height:14px; color:#b1b1b3; background:#efefef; padding: 0; opacity: 1; }\n#branch-banner .button { top: 0; text-decoration:none; border-bottom: 3px solid #A4C639; padding: 0 10px; height: 24px; line-height: 24px; text-align: center; color: #fff; margin-top: 2px;  font-weight: bold; background-color: #A4C639; border-radius: 5px; }\n#branch-banner .button:hover { border-bottom:3px solid #8c9c29; background-color: #c1d739; }\n",blackberry:"",windows_phone:"",kindle:""};banner_css.iframe="body { -webkit-transition: all "+1.5*banner_utils.animationSpeed/1e3+"s ease; transition: all 0"+1.5*banner_utils.animationSpeed/1e3+"s ease; }\n#branch-banner-iframe { box-shadow: 0 0 5px rgba(0, 0, 0, .35); width: 1px; min-width:100%; left: 0; right: 0; border: 0; height: "+banner_utils.bannerHeight+"; z-index: 99999; -webkit-transition: all "+banner_utils.animationSpeed/1e3+"s ease; transition: all 0"+banner_utils.animationSpeed/1e3+"s ease; }\n",banner_css.inneriframe="body { margin: 0; }\n",banner_css.iframe_position=function(e,t){return"#branch-banner-iframe { position: "+("top"!==t||e?"fixed":"absolute")+"; }\n"},banner_css.css=function(e,t){var n=banner_css.banner(e),r=utils.getPlatformByUserAgent();("ios"===r||"ipad"===r)&&e.showiOS?n+=banner_css.mobile+banner_css.ios:"android"===r&&e.showAndroid?n+=banner_css.mobile+banner_css.android:"blackberry"===r&&e.showBlackberry?n+=banner_css.mobile+banner_css.blackberry:"windows_phone"===r&&e.showWindowsPhone?n+=banner_css.mobile+banner_css.windows_phone:"kindle"===r&&e.showKindle&&(n+=banner_css.mobile+banner_css.kindle),n+=e.customCSS,e.iframe&&(n+=banner_css.inneriframe,(r=document.createElement("style")).type="text/css",r.id="branch-iframe-css",utils.addNonceAttribute(r),r.innerHTML=banner_css.iframe+banner_css.iframe_position(e.mobileSticky,e.position),(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),(r=document.createElement("style")).type="text/css",r.id="branch-css",r.innerHTML=n,utils.addNonceAttribute(r),(n=(n=e.iframe?t.contentWindow.document:document).head||n.getElementsByTagName("head")[0])&&"function"==typeof n.appendChild&&n.appendChild(r),"top"===e.position?t.style.top="-"+banner_utils.bannerHeight:"bottom"===e.position&&(t.style.bottom="-"+banner_utils.bannerHeight)};var session={get:function(e,t){try{var n=safejson.parse(e.get(t?"branch_session_first":"branch_session",t))||null;return utils.decodeBFPs(n)}catch(r){return null}},set:function(e,t,n){n&&t.referring_link&&utils.userPreferences.enableExtendedJourneysAssist&&(t.referringLinkExpiry=new Date().getTime()+utils.extendedJourneysAssistExpiryTime),t=utils.encodeBFPs(t),e.set("branch_session",goog.json.serialize(t)),n&&e.set("branch_session_first",goog.json.serialize(t),!0)},update:function(e,t){if(t){var n=session.get(e)||{};t=goog.json.serialize(utils.encodeBFPs(utils.merge(n,t))),e.set("branch_session",t)}},patch:function(e,t,n,r){var i=function(e,t){return utils.encodeBFPs(utils.merge(safejson.parse(e),t,r))},a=e.get("branch_session",!1)||{};e.set("branch_session",goog.json.serialize(i(a,t))),n&&(n=e.get("branch_session_first",!0)||{},e.set("branch_session_first",goog.json.serialize(i(n,t)),!0))}},banner_html={banner:function(e,t){if(t='<div class="content'+(e.theme?" theme-"+e.theme:"")+'"><div class="right">'+t+'</div><div class="left">'+(e.disableHide?"":'<div id="branch-banner-close" class="branch-animation" aria-label="Close">&times;</div>')+'<div class="icon"><img src="'+e.icon+'" alt="Application icon"></div><div class="details vertically-align-middle"><div class="title">'+e.title+"</div>",e.rating||e.reviewCount){if(e.rating){for(var n="",r=0;5>r;r++)n+='<span class="star"><svg class="star" fill="#555555" height="12" viewBox="3 2 20 19" width="12"><path d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/><path d="M0 0h24v24H0z" fill="none"/><foreignObject display="none"><span class="star">☆</span></foreignObject></svg>',e.rating>r&&(n+=r+1>e.rating&&e.rating%1?'<span class="half"><svg fill="#555555" height="12" viewBox="3 2 20 19" width="12"><defs><path d="M0 0h24v24H0V0z" id="a"/></defs><clipPath id="b"><use overflow="visible" xlink:href="#a"/></clipPath><path clip-path="url(#b)" d="M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"/></svg><foreignObject display="none"><span class="half">★</span></foreignObject></span>':'<span class="full"><svg fill="#555555" height="12" viewBox="3 2 20 19" width="12"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/><path d="M0 0h24v24H0z" fill="none"/><foreignObject display="none"><span class="full">★</span></foreignObject></svg> </span>'),n+="</span>";n='<span class="stars">'+n+"</span>"}else n="";n='<div class="reviews">'+n+(e.reviewCount?'<span class="review-count">'+e.reviewCount+"</span>":"")+"</div>"}else n="";return t+n+'<div class="description">'+e.description+"</div></div></div></div>"},mobileAction:function(e,t){return'<a id="branch-mobile-action" class="button" href="#" target="_parent">'+((session.get(t)||{}).has_app?e.openAppButtonText:e.downloadAppButtonText)+"</a>"},checkmark:function(){return window.ActiveXObject?'<span class="checkmark">&#x2713;</span>':'<svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 98.5 98.5" enable-background="new 0 0 98.5 98.5" xml:space="preserve"><path class="checkmark" fill="none" stroke-width="8" stroke-miterlimit="10" d="M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"/></svg>'},iframe:function(e,t,n){var r=document.createElement("iframe");r.src="about:blank",r.style.overflow="hidden",r.scrolling="no",r.id="branch-banner-iframe",r.className="branch-animation",utils.addNonceAttribute(r),r.onload=function(){var i=utils.getPlatformByUserAgent();i="ios"===i||"ipad"===i?"branch-banner-ios":"android"===i?"branch-banner-android":"branch-banner-other";var a=r.contentDocument||r.contentWindow.document;a.head=a.createElement("head"),a.body=a.createElement("body"),a.body.className=i,banner_html.div(e,t,a),n(r)},document.body.appendChild(r)},div:function(e,t,n){var r=(n=n||document).createElement("div");return r.id="branch-banner",r.className="branch-animation",r.innerHTML=banner_html.banner(e,t),n.body.appendChild(r),r},markup:function(e,t,n){t='<div id="branch-banner-form-container">'+banner_html.mobileAction(e,t)+"</div>",e.iframe?banner_html.iframe(e,t,n):n(e=banner_html.div(e,t,document))}},banner=function(e,t,n,r){if(!banner_utils.shouldAppend(r,t))return e._publishEvent("willNotShowBanner"),null;e._publishEvent("willShowBanner");var i,a=document.body.style.marginTop,o=document.body.style.marginBottom,s=function(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},"top"===t.position?i.style.top="-"+banner_utils.bannerHeight:"bottom"===t.position&&(i.style.bottom="-"+banner_utils.bannerHeight),"number"==typeof t.forgetHide?r.set("hideBanner",banner_utils.getDate(t.forgetHide),!0):r.set("hideBanner",!0,!0),e.immediate?("top"===t.position?document.body.style.marginTop=a:"bottom"===t.position&&(document.body.style.marginBottom=o),banner_utils.removeClass(document.body,"branch-banner-is-active"),banner_utils.removeElement(i),banner_utils.removeElement(document.getElementById("branch-css")),n()):(setTimeout(function(){banner_utils.removeElement(i),banner_utils.removeElement(document.getElementById("branch-css")),n()},banner_utils.animationSpeed+banner_utils.animationDelay),setTimeout(function(){"top"===t.position?document.body.style.marginTop=a:"bottom"===t.position&&(document.body.style.marginBottom=o),banner_utils.removeClass(document.body,"branch-banner-is-active")},banner_utils.animationDelay))};return banner_html.markup(t,r,function(r){function a(){"top"===t.position?i.style.top="0":"bottom"===t.position&&(i.style.bottom="0"),e._publishEvent("didShowBanner")}i=r,banner_css.css(t,i),n.channel=n.channel||"app banner",r=t.iframe?i.contentWindow.document:document;var o=utils.getPlatformByUserAgent();!["other","desktop"].includes(o)&&(t.open_app=t.open_app,t.append_deeplink_path=t.append_deeplink_path,t.make_new_link=t.make_new_link,t.deepview_type="banner",e.deepview(n,t),o=r.getElementById("branch-mobile-action"))&&(o.onclick=function(t){t.preventDefault(),e.deepviewCta()}),o=banner_utils.getBodyStyle("margin-top");var l=banner_utils.getBodyStyle("margin-bottom");banner_utils.addClass(document.body,"branch-banner-is-active"),"top"===t.position?document.body.style.marginTop=banner_utils.addCSSLengths(banner_utils.bannerHeight,o):"bottom"===t.position&&(document.body.style.marginBottom=banner_utils.addCSSLengths(banner_utils.bannerHeight,l)),(o=r.getElementById("branch-banner-close"))&&(o.onclick=function(t){t.preventDefault(),e._publishEvent("willCloseBanner"),s({},function(){e._publishEvent("didCloseBanner")})}),(r=r.getElementById("branch-banner-modal-background"))&&(r.onclick=function(t){t.preventDefault(),e._publishEvent("willCloseBanner"),s({},function(){e._publishEvent("didCloseBanner")})}),t.immediate?a():setTimeout(a,banner_utils.animationDelay)}),s},task_queue=function(){var e=[],t=function(){e.length&&e[0](function(){e.shift(),t()})};return function(n){e.push(n),1===e.length&&t()}},journeys_utils={_callback_index:1};function setDefaultBannerProperties(){journeys_utils.position="top",journeys_utils.sticky="absolute",journeys_utils.bannerHeight="76px",journeys_utils.isFullPage=!1,journeys_utils.isHalfPage=!1}function generateIframeOuterCSS(e){var t="";if(e="",document.body.style.transition="",document.getElementById("branch-banner-iframe")&&(document.getElementById("branch-banner-iframe").style.transition=""),journeys_utils.entryAnimationDisabled||(t="body { -webkit-transition: all "+1.5*journeys_utils.animationSpeed/1e3+"s ease; }\n",document.body.style.transition="all 0"+1.5*journeys_utils.animationSpeed/1e3+"s ease",e="-webkit-transition: all "+journeys_utils.animationSpeed/1e3+"s ease; transition: all 0"+journeys_utils.animationSpeed/1e3+"s ease;"),t=""+(t||""),journeys_utils.isDesktopJourney){var n=journeys_utils.bannerHeight,r=journeys_utils.bannerWidth,i=journeys_utils.sticky;"overlay"===journeys_utils.journeyVariant&&(r=n="100%!important",i="fixed"),t=t+("#branch-banner-iframe-embed { z-index: 99999!important; height: "+n+"; width: "+r+"; padding: 0px!important; margin: 0px!important; ; position: ")+i+"; }\n#branch-banner-iframe { box-shadow: 0 0 5px rgba(0, 0, 0, .35); width: 1px; min-width: 100%; left: 0; right: 0; border: 0; height: 100%!important; width: 100%!important; "+(e+"; position: ")+i+"; }\n"}else t+="#branch-banner-iframe { box-shadow: 0 0 5px rgba(0, 0, 0, .35); width: 1px; min-width:100%; left: 0; right: 0; border: 0; height: "+journeys_utils.bannerHeight+"; z-index: 99999; "+e+" }\n#branch-banner-iframe { position: "+journeys_utils.sticky+"; }\n@media only screen and (orientation: landscape) { body { "+("top"===journeys_utils.position?"margin-top: ":"margin-bottom: ")+(journeys_utils.isFullPage?journeys_utils.windowWidth+"px":journeys_utils.bannerHeight)+"; }\n#branch-banner-iframe { height: "+(journeys_utils.isFullPage?journeys_utils.windowWidth+"px":journeys_utils.bannerHeight)+"; }";return t}setDefaultBannerProperties(),journeys_utils.divToInjectParents=[],journeys_utils.isSafeAreaEnabled=!1,journeys_utils.windowHeight=window.innerHeight,journeys_utils.windowWidth=window.innerWidth,window.innerHeight<window.innerWidth&&(journeys_utils.windowHeight=window.innerWidth,journeys_utils.windowWidth=window.innerHeight),journeys_utils.bodyMarginTop=0,journeys_utils.bodyMarginBottom=0,journeys_utils.exitAnimationIsRunning=!1,journeys_utils.jsonRe=/<script type="application\/json">((.|\s)*?)<\/script>/,journeys_utils.jsRe=/<script type="text\/javascript">((.|\s)*?)<\/script>/,journeys_utils.cssRe=/<style type="text\/css" id="branch-css">((.|\s)*?)<\/style>/,journeys_utils.iframeCssRe=/<style type="text\/css" id="branch-iframe-css">((.|\s)*?)<\/style>/,journeys_utils.spacerRe=/#branch-banner-spacer {((.|\s)*?)}/,journeys_utils.findMarginRe=/margin-bottom: (.*?);/,journeys_utils.branch=null,journeys_utils.banner=null,journeys_utils.isJourneyDisplayed=!1,journeys_utils.animationSpeed=250,journeys_utils.animationDelay=20,journeys_utils.exitAnimationDisabled=!1,journeys_utils.entryAnimationDisabled=!1,journeys_utils.journeyDismissed=!1,journeys_utils.exitAnimationDisabledPreviously=!1,journeys_utils.previousPosition="",journeys_utils.previousDivToInjectParents=[],journeys_utils.journeyLinkData=null,journeys_utils.getRelativeHeightValueOrFalseFromBannerHeight=function(e){var t=/vh|%/gi;return!!t.test(e)&&e.replace(t,"")},journeys_utils.setPositionAndHeight=function(e){setDefaultBannerProperties();var t=journeys_utils.getMetadata(e)||{};t&&t.bannerHeight&&t.position&&t.sticky?(journeys_utils.bannerHeight=t.bannerHeight,journeys_utils.position=t.position,journeys_utils.sticky=t.sticky):(e=e.match(journeys_utils.spacerRe))?(journeys_utils.position="top",(e=e[1].match(journeys_utils.findMarginRe))&&(journeys_utils.bannerHeight=e[1]),journeys_utils.sticky="absolute"):(journeys_utils.position="bottom",journeys_utils.sticky="fixed"),(e=journeys_utils.getRelativeHeightValueOrFalseFromBannerHeight(journeys_utils.bannerHeight))&&(journeys_utils.bannerHeight=e/100*journeys_utils.windowHeight+"px",100>e?journeys_utils.isHalfPage=!0:journeys_utils.isFullPage=!0)},journeys_utils.getMetadata=function(e){if(e=e.match(journeys_utils.jsonRe))return safejson.parse(e[1])},journeys_utils.getIframeCss=function(e){if(e=e.match(journeys_utils.iframeCssRe))return e[1]},journeys_utils.getCtaText=function(e,t){var n;return t&&e&&e.ctaText&&e.ctaText.has_app?n=e.ctaText.has_app:e&&e.ctaText&&e.ctaText.no_app&&(n=e.ctaText.no_app),n},journeys_utils.findInsertionDiv=function(e,t){if(journeys_utils.divToInjectParents=[],t&&t.injectorSelector&&(e=document.querySelectorAll(t.injectorSelector)))for(t=0;t<e.length;t++)journeys_utils.divToInjectParents.push(e[t].parentElement)},journeys_utils.getCss=function(e){if(e=e.match(journeys_utils.cssRe))return e[1]},journeys_utils.getJsAndAddToParent=function(e){if(e=e.match(journeys_utils.jsRe)){e=e[1];var t=document.createElement("script");t.id="branch-journey-cta",utils.addNonceAttribute(t),t.innerHTML=e,document.body.appendChild(t)}},journeys_utils.removeScriptAndCss=function(e){var t=e.match(journeys_utils.jsonRe),n=e.match(journeys_utils.jsRe),r=e.match(journeys_utils.cssRe),i=e.match(journeys_utils.iframeCssRe);return t&&(e=e.replace(journeys_utils.jsonRe,"")),n&&(e=e.replace(journeys_utils.jsRe,"")),r&&(e=e.replace(journeys_utils.cssRe,"")),i&&(e=e.replace(journeys_utils.iframeCssRe,"")),e},journeys_utils.createIframe=function(){var e=document.createElement("iframe");return e.src="about:blank",e.style.overflow="hidden",e.scrolling="no",e.id="branch-banner-iframe",e.className="branch-animation",e.setAttribute("tabindex","-1"),utils.addNonceAttribute(e),e},journeys_utils.addHtmlToIframe=function(e,t,n){n="ios"===n||"ipad"===n?"branch-banner-ios":"android"===n?"branch-banner-android":"branch-banner-other",(e=e.contentDocument||e.contentWindow.document).head=e.createElement("head"),e.body=e.createElement("body"),e.body.innerHTML=t,e.body.className=n,(t=e.querySelector('meta[name="accessibility"]'))&&"wcag"===t.content&&((t=e.createElement("script")).type="text/javascript",t.text="\n			var focusableElements = 'button, [href], input, select, textarea, [role=\"button\"], h1, [role=\"text\"], .branch-banner-content';\n			var modal = document.getElementById('branch-banner');\n			var focusableContent = modal.querySelectorAll(focusableElements);\n			var focusElementIdx = 0;\n\n			function handleTabKey(e) {\n				var isTabPressed = e.key === 'Tab' || e.keyCode === 9;\n			\n				if (!isTabPressed) {\n					return;\n				}\n\n				if (e.shifKey) {\n					if (focusElementIdx <= 0) {\n						focusElementIdx = focusableContent.length - 1;\n					} else {\n						focusElementIdx = focusElementIdx - 1;\n					}\n				} else {\n					if (focusElementIdx >= focusableContent.length - 1) {\n						focusElementIdx = 0;\n					} else {\n						focusElementIdx = focusElementIdx + 1;\n					}\n				}\n\n				focusableContent[focusElementIdx].focus();\n				e.preventDefault();\n			}\n\n			function autoFocus(delay) {\n				setTimeout(function() { focusableContent[focusElementIdx].focus() }, delay);\n			}\n\n			document.addEventListener('keydown', handleTabKey);\n			autoFocus(100);\n			\n		",e.querySelector("body").append(t))},journeys_utils.addIframeOuterCSS=function(e,t){var n=document.createElement("style");n.type="text/css",n.id="branch-iframe-css",journeys_utils.bodyMarginTop=banner_utils.getBodyStyle("margin-top");var r=+journeys_utils.bodyMarginTop.slice(0,-2);journeys_utils.bodyMarginBottom=banner_utils.getBodyStyle("margin-bottom");var i=+journeys_utils.bodyMarginBottom.slice(0,-2),a=+journeys_utils.bannerHeight.slice(0,-2);e||("top"===journeys_utils.position?document.body.style.marginTop=(+a+r).toString()+"px":"bottom"===journeys_utils.position&&(document.body.style.marginBottom=(+a+i).toString()+"px")),0<journeys_utils.divToInjectParents.length&&journeys_utils.divToInjectParents.forEach(function(e){var t,n=window.getComputedStyle(e);n&&(t=journeys_utils.isFullPage&&"fixed"===n.getPropertyValue("position")),t||(e.style.marginTop=journeys_utils.bannerHeight)}),"top"===journeys_utils.previousPosition&&journeys_utils.previousPosition!==journeys_utils.position&&journeys_utils.exitAnimationDisabledPreviously&&journeys_utils.previousDivToInjectParents&&0<journeys_utils.previousDivToInjectParents.length&&journeys_utils.previousDivToInjectParents.forEach(function(e){e.style.marginTop=0}),journeys_utils.exitAnimationDisabledPreviously=!1,journeys_utils.previousPosition="",journeys_utils.previousDivToInjectParents=[],journeys_utils.journeyDismissed=!1,n.innerHTML=e||generateIframeOuterCSS(t),utils.addNonceAttribute(n),document.head.appendChild(n)},journeys_utils.addIframeInnerCSS=function(e,t){var n=document.createElement("style");if(n.type="text/css",n.id="branch-css",n.innerHTML=t,utils.addNonceAttribute(n),(t=e.contentWindow.document).head.appendChild(n),n=journeys_utils.isDesktopJourney&&"overlay"===journeys_utils.journeyVariant,(journeys_utils.isHalfPage||journeys_utils.isFullPage)&&!n){n=t.getElementsByClassName("branch-banner-dismiss-background")[0];var r=t.getElementsByClassName("branch-banner-content")[0];!n&&r&&(r.style.height=journeys_utils.bannerHeight)}"top"===journeys_utils.position?e.style.top="-"+journeys_utils.bannerHeight:"bottom"===journeys_utils.position&&(e.style.bottom="-"+journeys_utils.bannerHeight);try{r=t.getElementsByClassName("branch-banner-content")[0];var i=window.getComputedStyle(r).getPropertyValue("background-color").split(", ");i[3]&&0===parseFloat(i[3])&&(e.style.boxShadow="none")}catch(a){}},journeys_utils.addDynamicCtaText=function(e,t){(e=e.contentWindow.document)&&e.getElementById("branch-mobile-action")&&((e=e.getElementById("branch-mobile-action")).innerHTML=t,e.setAttribute("aria-label",t))},journeys_utils.centerOverlay=function(e){e&&e.style&&(e.style.bottom="140px",e.style.width="94%",e.style.borderRadius="20px",e.style.margin="auto")},journeys_utils.animateBannerEntrance=function(e,t){if(banner_utils.addClass(document.body,"branch-banner-is-active"),journeys_utils.isFullPage&&"fixed"===journeys_utils.sticky){var n=document.createElement("style");n.type="text/css",n.innerHTML=".branch-banner-no-scroll {overflow: hidden;}",document.head.appendChild(n),banner_utils.addClass(document.body,"branch-banner-no-scroll")}setTimeout(function(){t?(e.style.top=null,e.style.bottom=null):"top"===journeys_utils.position?e.style.top="0":"bottom"===journeys_utils.position&&(journeys_utils.journeyLinkData&&journeys_utils.journeyLinkData.journey_link_data&&!journeys_utils.journeyLinkData.journey_link_data.safeAreaRequired?e.style.bottom="0":journeys_utils._dynamicallyRepositionBanner()),journeys_utils.branch._publishEvent("didShowJourney",journeys_utils.journeyLinkData),journeys_utils.isJourneyDisplayed=!0},journeys_utils.animationDelay)},journeys_utils._resizeListener=function(){journeys_utils.isSafeAreaEnabled&&journeys_utils._resetJourneysBannerPosition(!1,!1)},journeys_utils._scrollListener=function(){journeys_utils.isSafeAreaEnabled&&(window.pageYOffset>window.innerHeight?journeys_utils._resetJourneysBannerPosition(!0,!1):journeys_utils._resetJourneysBannerPosition(!1,!1))},journeys_utils._dynamicallyRepositionBanner=function(){journeys_utils.isSafeAreaEnabled=!0,document.getElementById("branch-banner-iframe").style.transition="all 0s",journeys_utils._resetJourneysBannerPosition(!1,!0),window.addEventListener("resize",journeys_utils._resizeListener),window.addEventListener("scroll",journeys_utils._scrollListener)},journeys_utils._resetJourneysBannerPosition=function(e,t){var n=document.getElementById("branch-banner-iframe"),r=n.offsetHeight,i=n.offsetTop,a=window.innerHeight;if(t&&0!==window.pageYOffset)return n.style.bottom="0",!1;e?n.style.top=a-r+r/2+"px":a-i!=r&&(n.style.top=""+(a-r)+"px")},journeys_utils._addSecondsToDate=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e)},journeys_utils._findGlobalDismissPeriod=function(e){if("number"==typeof(e=e.globalDismissPeriod))return -1===e||journeys_utils._addSecondsToDate(e)},journeys_utils.finalHookups=function(e,t,n,r,i,a,o,s){if(r&&i){var l=i.contentWindow.document.querySelectorAll("#branch-mobile-action");Array.prototype.forEach.call(l,function(e){e.addEventListener("click",function(e){journeys_utils.branch._publishEvent("didClickJourneyCTA",journeys_utils.journeyLinkData),journeys_utils.journeyDismissed=!0,r(),journeys_utils.animateBannerExit(i)})}),journeys_utils._setupDismissBehavior(".branch-banner-continue","didClickJourneyContinue",n,i,e,t,a,o,s,"click"),journeys_utils._setupDismissBehavior(".branch-banner-close","didClickJourneyClose",n,i,e,t,a,o,s,"click"),journeys_utils._setupDismissBehavior(".branch-banner-dismiss-background","didClickJourneyBackgroundDismiss",n,i,e,t,a,o,s,"click"),journeys_utils._setupDismissBehavior(".branch-banner-dismiss-background","didScrollJourneyBackgroundDismiss",n,i,e,t,a,o,s,"touchmove")}},journeys_utils._setupDismissBehavior=function(e,t,n,r,i,a,o,s,l,d){e=r.contentWindow.document.querySelectorAll(e),Array.prototype.forEach.call(e,function(e){e.addEventListener(d,function(e){journeys_utils._handleJourneyDismiss(t,n,r,i,a,o,s,l)})})},journeys_utils._setJourneyDismiss=function(e,t,n){var r=e.get("journeyDismissals",!0);return(r=r?safejson.parse(r):{})[n]={view_id:t,dismiss_time:Date.now()},e.set("journeyDismissals",safejson.stringify(r),!0),r},journeys_utils.decodeSymbols=function(e){return null==e?null:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&brvbar;/g,"\xa6").replace(/&laquo;/g,"\xab").replace(/&acute;/g,"\xb4").replace(/&middot;/g,"\xb7").replace(/&raquo;/g,"\xbb").replace(/&amp;/g,"&").replace(/&iquest;/g,"\xbf").replace(/&times;/g,"\xd7").replace(/&divide;/g,"\xf7").replace(/&Agrave;/g,"\xc0").replace(/&Aacute;/g,"\xc1").replace(/&Acirc;/g,"\xc2").replace(/&Atilde;/g,"\xc3").replace(/&Auml;/g,"\xc4").replace(/&Aring;/g,"\xc5").replace(/&AElig;/g,"\xc6").replace(/&Ccedil;/g,"\xc7").replace(/&Egrave;/g,"\xc8").replace(/&Eacute;/g,"\xc9").replace(/&Ecirc;/g,"\xca").replace(/&Euml;/g,"\xcb").replace(/&Igrave;/g,"\xcc").replace(/&Iacute;/g,"\xcd").replace(/&Icirc;/g,"\xce").replace(/&Iuml;/g,"\xcf").replace(/&ETH;/g,"\xd0").replace(/&Ntilde;/g,"\xd1").replace(/&Ograve;/g,"\xd2").replace(/&Oacute;/g,"\xd3").replace(/&Ocirc;/g,"\xd4").replace(/&Otilde;/g,"\xd5").replace(/&Ouml;/g,"\xd6").replace(/&Oslash;/g,"\xd8").replace(/&Ugrave;/g,"\xd9").replace(/&Uacute;/g,"\xda").replace(/&Ucirc;/g,"\xdb").replace(/&Uuml;/g,"\xdc").replace(/&Yacute;/g,"\xdd").replace(/&THORN;/g,"\xde").replace(/&szlig;/g,"\xdf").replace(/&agrave;/g,"\xe0").replace(/&aacute;/g,"\xe1").replace(/&acirc;/g,"\xe2").replace(/&atilde;/g,"\xe3").replace(/&auml;/g,"\xe4").replace(/&aring;/g,"\xe5").replace(/&aelig;/g,"\xe6").replace(/&ccedil;/g,"\xe7").replace(/&egrave;/g,"\xe8").replace(/&eacute;/g,"\xe9").replace(/&ecirc;/g,"\xea").replace(/&euml;/g,"\xeb").replace(/&igrave;/g,"\xec").replace(/&iacute;/g,"\xed").replace(/&icirc;/g,"\xee").replace(/&iuml;/g,"\xef").replace(/&eth;/g,"\xf0").replace(/&ntilde;/g,"\xf1").replace(/&ograve;/g,"\xf2").replace(/&oacute;/g,"\xf3").replace(/&ocirc;/g,"\xf4").replace(/&otilde;/g,"\xf5").replace(/&ouml;/g,"\xf6").replace(/&oslash;/g,"\xf8").replace(/&ugrave;/g,"\xf9").replace(/&uacute;/g,"\xfa").replace(/&ucirc;/g,"\xfb").replace(/&uuml;/g,"\xfc").replace(/&yacute;/g,"\xfd").replace(/&thorn;/g,"\xfe").replace(/&yuml;/g,"\xff")},journeys_utils._getDismissRequestData=function(e,t){var n={},r=utils.getHostedDeepLinkData();if(r&&0<Object.keys(r).length&&(n.hosted_deeplink_data=r),e=e._getPageviewRequestData(journeys_utils._getPageviewMetadata(null,n),null,journeys_utils.branch,!0),journeys_utils.journeyLinkData&&journeys_utils.journeyLinkData.journey_link_data){utils.addPropertyIfNotNull(e,"journey_id",journeys_utils.journeyLinkData.journey_link_data.journey_id),utils.addPropertyIfNotNull(e,"journey_name",journeys_utils.decodeSymbols(journeys_utils.journeyLinkData.journey_link_data.journey_name)),utils.addPropertyIfNotNull(e,"view_id",journeys_utils.journeyLinkData.journey_link_data.view_id),utils.addPropertyIfNotNull(e,"view_name",journeys_utils.decodeSymbols(journeys_utils.journeyLinkData.journey_link_data.view_name)),utils.addPropertyIfNotNull(e,"channel",journeys_utils.decodeSymbols(journeys_utils.journeyLinkData.journey_link_data.channel)),utils.addPropertyIfNotNull(e,"campaign",journeys_utils.decodeSymbols(journeys_utils.journeyLinkData.journey_link_data.campaign));try{utils.addPropertyIfNotNull(e,"tags",JSON.stringify(journeys_utils.journeyLinkData.journey_link_data.tags))}catch(i){e.tags=JSON.stringify([])}}return utils.addPropertyIfNotNull(e,"dismissal_source",t),e},journeys_utils._handleJourneyDismiss=function(e,t,n,r,i,a,o,s){var l=o?0:journeys_utils._findGlobalDismissPeriod(a);if(journeys_utils.branch._publishEvent(e,journeys_utils.journeyLinkData),journeys_utils.journeyDismissed=!0,journeys_utils.animateBannerExit(n),!o){void 0!==l&&t.set("globalJourneysDismiss",l,!0),journeys_utils._setJourneyDismiss(t,r,i);var d=function(){journeys_utils.branch.removeListener(d);var t=journeys_utils._getDismissRequestData(s,utils.dismissEventToSourceMapping[e]);journeys_utils.branch._api(resources.dismiss,t,function(e,n){!e&&a&&a.dismissRedirect?window.location=a.dismissRedirect:!e&&"object"==typeof n&&n.template&&s.shouldDisplayJourney(n,null,!1)&&s.displayJourney(n.template,t,t.branch_view_id||n.event_data.branch_view_data.id,n.event_data.branch_view_data,!1,n.journey_link_data)})};journeys_utils.branch.addListener("branch_internal_event_didCloseJourney",d)}},journeys_utils._getPageviewMetadata=function(e,t){return e=utils.merge({url:e&&e.url||utils.getWindowLocation(),user_agent:navigator.userAgent,language:navigator.language,screen_width:screen.width||-1,screen_height:screen.height||-1,window_device_pixel_ratio:window.devicePixelRatio||1},t||{}),e=utils.addPropertyIfNotNullorEmpty(e,"model",utils.userAgentData?utils.userAgentData.model:""),e=utils.addPropertyIfNotNullorEmpty(e,"os_version",utils.userAgentData?utils.userAgentData.platformVersion:"")},journeys_utils.animateBannerExit=function(e,t){if(journeys_utils.exitAnimationDisabled||(journeys_utils.exitAnimationIsRunning=!0),journeys_utils.entryAnimationDisabled&&!journeys_utils.exitAnimationDisabled){document.body.style.transition="all 0"+1.5*journeys_utils.animationSpeed/1e3+"s ease",document.getElementById("branch-banner-iframe").style.transition="all 0"+journeys_utils.animationSpeed/1e3+"s ease";var n=document.getElementById("branch-iframe-css").innerHTML+"\n";n+="body { -webkit-transition: all "+1.5*journeys_utils.animationSpeed/1e3+"s ease; }\n",n+="#branch-banner-iframe { -webkit-transition: all "+journeys_utils.animationSpeed/1e3+"s ease; }\n",document.getElementById("branch-iframe-css").innerHTML="",document.getElementById("branch-iframe-css").innerHTML=n}"top"===journeys_utils.position?e.style.top="-"+journeys_utils.bannerHeight:"bottom"===journeys_utils.position&&(e.style.bottom="-"+journeys_utils.bannerHeight),journeys_utils.branch._publishEvent("willCloseJourney",journeys_utils.journeyLinkData),setTimeout(function(){banner_utils.removeElement(e),banner_utils.removeElement(document.getElementById("branch-css")),banner_utils.removeElement(document.getElementById("branch-iframe-css")),banner_utils.removeElement(document.getElementById("branch-journey-cta")),(!journeys_utils.exitAnimationDisabled||journeys_utils.journeyDismissed)&&journeys_utils.divToInjectParents&&0<journeys_utils.divToInjectParents.length?journeys_utils.divToInjectParents.forEach(function(e){e.style.marginTop=0}):(journeys_utils.exitAnimationDisabledPreviously=journeys_utils.exitAnimationDisabled,journeys_utils.previousPosition=journeys_utils.position,journeys_utils.previousDivToInjectParents=journeys_utils.divToInjectParents),"top"===journeys_utils.position?document.body.style.marginTop=journeys_utils.bodyMarginTop:"bottom"===journeys_utils.position&&(document.body.style.marginBottom=journeys_utils.bodyMarginBottom),banner_utils.removeClass(document.body,"branch-banner-is-active"),banner_utils.removeClass(document.body,"branch-banner-no-scroll"),journeys_utils.isSafeAreaEnabled&&(journeys_utils.isSafeAreaEnabled=!1,window.removeEventListener("resize",journeys_utils._resizeListener),window.removeEventListener("scroll",journeys_utils._scrollListener)),journeys_utils.branch._publishEvent("didCloseJourney",journeys_utils.journeyLinkData),t||journeys_utils.branch._publishEvent("branch_internal_event_didCloseJourney",journeys_utils.journeyLinkData),journeys_utils.isJourneyDisplayed=!1,setTimeout(function(){journeys_utils.exitAnimationIsRunning=!1},journeys_utils.animationSpeed)},journeys_utils.exitAnimationDisabled?0:journeys_utils.animationSpeed+journeys_utils.animationDelay)},journeys_utils.setJourneyLinkData=function(e){var t={banner_id:journeys_utils.branchViewId};e&&"object"==typeof e&&0<Object.keys(e||{}).length&&(utils.removePropertiesFromObject(e,["browser_fingerprint_id","app_id","source","open_app","link_click_id"]),t.journey_link_data={},utils.merge(t.journey_link_data,e)),journeys_utils.journeyLinkData=t,journeys_utils.journeyType=t.journey_link_data.type||null,journeys_utils.isDesktopJourney="desktop"===t.journey_link_data.type,journeys_utils.journeyVariant=t.journey_link_data.variant||null},journeys_utils.getValueForKeyInBranchViewData=function(e){return!!journeys_utils&&!!journeys_utils.branch&&!!journeys_utils.branch._branchViewData&&!!journeys_utils.branch._branchViewData.data&&journeys_utils.branch._branchViewData.data[e]},journeys_utils.hasJourneyCtaLink=function(){return!!journeys_utils.getValueForKeyInBranchViewData("$journeys_cta")&&0<journeys_utils.getBranchViewDataItemOrUndefined("$journeys_cta").length},journeys_utils.getBranchViewDataItemOrUndefined=function(e){if(journeys_utils.getValueForKeyInBranchViewData(e))return journeys_utils.branch._branchViewData.data[e]},journeys_utils.getJourneyCtaLink=function(){return journeys_utils.getBranchViewDataItemOrUndefined("$journeys_cta")},journeys_utils.tryReplaceJourneyCtaLink=function(e){try{if(journeys_utils.hasJourneyCtaLink()){var t='validate("'+journeys_utils.getJourneyCtaLink()+'")';return e.replace(/validate[(].+[)];/g,t).replace("window.top.location.replace(","window.top.location = ")}}catch(n){}return e},journeys_utils.trySetJourneyUrls=function(e,t=["$android_url","$ios_url","$fallback_url","$desktop_url"]){if(!e)return e;var n=function(e){return t.reduce((e,t)=>{if(e[t])return e;var n=journeys_utils.getBranchViewDataItemOrUndefined(t);return n&&(e[t]=n),e},e)};try{var r=safejson.parse(e.data);return e.data=JSON.stringify(n(r)),e}catch(i){return e}};var branch_view={};function checkPreviousBanner(){return!!(document.getElementById("branch-banner")||document.getElementById("branch-banner-iframe")||document.getElementById("branch-banner-container"))}function renderHtmlBlob(e,t,n,r){var i=n?"OPEN":"GET";journeys_utils.setPositionAndHeight(t);var a=journeys_utils.getMetadata(t);a&&(i=journeys_utils.getCtaText(a,n),journeys_utils.findInsertionDiv(e,a));var o=journeys_utils.getCss(t);journeys_utils.getJsAndAddToParent(t);var s=journeys_utils.getIframeCss(t);t=journeys_utils.removeScriptAndCss(t),(e=document.createElement("div")).id="branch-banner-iframe-embed";var l=journeys_utils.createIframe();return l.onload=function(){journeys_utils.addHtmlToIframe(l,t,utils.getPlatformByUserAgent()),journeys_utils.addIframeOuterCSS(s,a),journeys_utils.addIframeInnerCSS(l,o),journeys_utils.addDynamicCtaText(l,i),journeys_utils.branch._publishEvent("willShowJourney",journeys_utils.journeyLinkData),journeys_utils.animateBannerEntrance(l,s),r(l)},journeys_utils.isDesktopJourney?(e.appendChild(l),document.body.appendChild(e)):document.body.appendChild(l),l}function _areJourneysDismissedGlobally(e){var t=e._storage.get("globalJourneysDismiss",!0);return!!(!0===t||t>Date.now())||(e._storage.remove("globalJourneysDismiss",!0),!1)}branch_view.shouldDisplayJourney=function(e,t,n){return!checkPreviousBanner()&&"other"!=utils.getPlatformByUserAgent()&&!!e.event_data&&!!e.template&&(!!n||!(!e.event_data.branch_view_data.id||t&&t.no_journeys||_areJourneysDismissedGlobally(journeys_utils.branch))||(branch_view.callback_index=1,!1))},branch_view.incrementPageviewAnalytics=function(e){e={event:"pageview",journey_displayed:!0,audience_rule_id:e.audience_rule_id,branch_view_id:e.branch_view_id};var t=session.get(journeys_utils.branch._storage)||{};t=t.hasOwnProperty("identity")?t.identity:null,e=utils.addPropertyIfNotNull(e,"identity",t),journeys_utils.branch._api(resources.pageview,e,function(e,t){})},branch_view.displayJourney=function(e,t,n,r,i,a){if(!journeys_utils.exitAnimationIsRunning){journeys_utils.branchViewId=n,journeys_utils.setJourneyLinkData(a);var o=r.audience_rule_id;(a=document.getElementById("branch-iframe-css"))&&a.parentElement.removeChild(a);var s=document.createElement("div");s.id="branch-banner",document.body.insertBefore(s,null),banner_utils.addClass(s,"branch-banner-is-active");var l=!1,d=t.callback_string,c=null,u=journeys_utils.branch._storage;if(e){var p=journeys_utils.getMetadata(e)||{};e=journeys_utils.tryReplaceJourneyCtaLink(e);var f=window.setTimeout(function(){window[d]=function(){}},utils.timeout);window[d]=function(e){window.clearTimeout(f),l||(c=e,journeys_utils.finalHookups(n,o,u,c,null,p,i,branch_view))},renderHtmlBlob(document.body,e,t.has_app_websdk,function(e){journeys_utils.banner=e,null===e?l=!0:(journeys_utils.finalHookups(n,o,u,c,e,p,i,branch_view),utils.navigationTimingAPIEnabled&&(utils.instrumentation["journey-load-time"]=utils.timeSinceNavigationStart()),document.body.removeChild(s),utils.userPreferences.trackingDisabled||i||branch_view.incrementPageviewAnalytics(r))})}else document.body.removeChild(s),utils.userPreferences.trackingDisabled||i||branch_view.incrementPageviewAnalytics(r)}},branch_view._getPageviewRequestData=function(e,t,n,r){journeys_utils.branch=n,t||(t={}),e||(e={}),journeys_utils.entryAnimationDisabled=t.disable_entry_animation||!1,journeys_utils.exitAnimationDisabled=t.disable_exit_animation||!1;var i=utils.merge({},n._branchViewData),a=session.get(n._storage)||{},o=!!a.hasOwnProperty("has_app")&&a.has_app,s=a.hasOwnProperty("identity")?a.identity:null,l=n._storage.get("journeyDismissals",!0),d=(t.user_language||utils.getBrowserLanguageCode()||"en").toLowerCase()||null,c=utils.getInitialReferrer(n._referringLink()),u=t.branch_view_id||utils.getParameterByName("_branch_view_id")||null;n=t.make_new_link?null:utils.getClickIdAndSearchStringFromLink(n._referringLink(!0));var p=a.hasOwnProperty("session_link_click_id")?a.session_link_click_id:null;return i.event=r?"dismiss":"pageview",i.metadata=e,i=utils.addPropertyIfNotNull(i,"initial_referrer",c),i=utils.addPropertyIfNotNull(i,"branch_view_id",u),i=utils.addPropertyIfNotNull(i,"no_journeys",t.no_journeys),i=utils.addPropertyIfNotNull(i,"is_iframe",utils.isIframe()),i=utils.addPropertyIfNotNull(i,"journey_dismissals",l),i=utils.addPropertyIfNotNull(i,"identity",s),(i=utils.addPropertyIfNotNull(i,"session_link_click_id",p)).user_language=d,i.open_app=t.open_app||!1,i.has_app_websdk=o,i.feature="journeys",i.callback_string="branch_view_callback__"+journeys_utils._callback_index++,i.data||(i.data={}),i.data=utils.merge(utils.getHostedDeepLinkData(),i.data),i.data=utils.merge(utils.whiteListJourneysLanguageData(a||{}),i.data),n&&(i.data.link_click_id=n),(e=a.data?safejson.parse(a.data):null)&&e["+referrer"]&&(i.data["+referrer"]=e["+referrer"]),i.session_referring_link_data=a.data||null,utils.cleanLinkData(i)};var default_branch,callback_params={NO_CALLBACK:0,CALLBACK_ERR:1,CALLBACK_ERR_DATA:2},init_states={NO_INIT:0,INIT_PENDING:1,INIT_FAILED:2,INIT_SUCCEEDED:3},init_state_fail_codes={NO_FAILURE:0,UNKNOWN_CAUSE:1,OPEN_FAILED:2,BFP_NOT_FOUND:3,HAS_APP_FAILED:4},wrap=function(e,t,n){return function(){var r=this,i=arguments[arguments.length-1];if(e===callback_params.NO_CALLBACK||"function"!=typeof i)var a=function(e){},o=Array.prototype.slice.call(arguments);else o=Array.prototype.slice.call(arguments,0,arguments.length-1)||[],a=i;r._queue(function(i){var s=function(t,n){try{if(t&&e===callback_params.NO_CALLBACK)throw t;e===callback_params.CALLBACK_ERR?a(t):e===callback_params.CALLBACK_ERR_DATA&&a(t,n)}finally{i()}};if(!n){if(r.init_state===init_states.INIT_PENDING)return s(Error(utils.message(utils.messages.initPending)),null);if(r.init_state===init_states.INIT_FAILED)return s(Error(utils.message(utils.messages.initFailed,r.init_state_fail_code,r.init_state_fail_details)),null);if(r.init_state===init_states.NO_INIT||!r.init_state)return s(Error(utils.message(utils.messages.nonInit)),null)}o.unshift(s),t.apply(r,o)})}},Branch=function(){if(!(this instanceof Branch))return default_branch||(default_branch=new Branch),default_branch;this._queue=task_queue(),this._storage=new storage.BranchStorage(["session","cookie","pojo"]),this._server=new Server,this._listeners=[],this.sdk="web"+config.version,this.requestMetadata={},this.init_state=init_states.NO_INIT,this.init_state_fail_code=init_state_fail_codes.NO_FAILURE,this.init_state_fail_details=null};function _setBranchViewData(e,t,n){n=n||{};try{e._branchViewData=safejson.parse(safejson.stringify(n))}finally{e._branchViewData=e._branchViewData||{}}t()}Branch.prototype._api=function(e,t,n){if(this.app_id&&(t.app_id=this.app_id),this.branch_key&&(t.branch_key=this.branch_key),(e.params&&e.params.session_id||e.queryPart&&e.queryPart.session_id)&&this.session_id&&(t.session_id=this.session_id),(e.params&&e.params.identity_id||e.queryPart&&e.queryPart.identity_id)&&this.identity_id&&(t.identity_id=this.identity_id),0>e.endpoint.indexOf("/v1/")?(e.params&&e.params.developer_identity||e.queryPart&&e.queryPart.developer_identity)&&this.identity&&(t.developer_identity=this.identity):(e.params&&e.params.identity||e.queryPart&&e.queryPart.identity)&&this.identity&&(t.identity=this.identity),(e.params&&e.params.link_click_id||e.queryPart&&e.queryPart.link_click_id)&&this.link_click_id&&(t.link_click_id=this.link_click_id),(e.params&&e.params.sdk||e.queryPart&&e.queryPart.sdk)&&this.sdk&&(t.sdk=this.sdk),(e.params&&e.params.browser_fingerprint_id||e.queryPart&&e.queryPart.browser_fingerprint_id)&&this.browser_fingerprint_id&&(t.browser_fingerprint_id=this.browser_fingerprint_id),utils.userPreferences.trackingDisabled&&(t.tracking_disabled=utils.userPreferences.trackingDisabled),this.requestMetadata)for(var r in this.requestMetadata)this.requestMetadata.hasOwnProperty(r)&&(t.branch_requestMetadata||(t.branch_requestMetadata={}),t.branch_requestMetadata[r]=this.requestMetadata[r]);return utils.shouldAddDMAParams(e.endpoint)&&(r=this._storage.get("branch_dma_data",!0),t.branch_dma_data=r?safejson.parse(r):{}),"/_r"!==e.endpoint&&(e.destination=config.api_endpoint),this._server.request(e,t,this._storage,function(e,t){n(e,t)})},Branch.prototype._referringLink=function(e){var t=session.get(this._storage);if(t=t&&t.referring_link)return t;if(utils.userPreferences.enableExtendedJourneysAssist&&e&&(e=(t=session.get(this._storage,!0))&&t.referring_link,t=t&&t.referringLinkExpiry,e&&t)){if(!(new Date().getTime()>t))return e;session.patch(this._storage,{referringLinkExpiry:null},!0,!0)}return(e=this._storage.get("click_id"))?config.link_service_endpoint+"/c/"+e:null},Branch.prototype._publishEvent=function(e,t){for(var n=0;n<this._listeners.length;n++)this._listeners[n].event&&this._listeners[n].event!==e||this._listeners[n].listener(e,t)},Branch.prototype.init=wrap(callback_params.CALLBACK_ERR_DATA,function(e,t,n){utils.navigationTimingAPIEnabled&&(utils.instrumentation["init-began-at"]=utils.timeSinceNavigationStart());var r=this;r.init_state=init_states.INIT_PENDING,utils.isKey(t)?r.branch_key=t:r.app_id=t,n=n&&utils.validateParameterType(n,"object")?n:{},r.init_options=n,utils.retries=n&&n.retries&&Number.isInteger(n.retries)?n.retries:utils.retries,utils.retry_delay=n&&n.retry_delay&&Number.isInteger(n.retry_delay)?n.retry_delay:utils.retry_delay,utils.timeout=n&&n.timeout&&Number.isInteger(n.timeout)?n.timeout:utils.timeout,utils.nonce=n&&n.nonce?n.nonce:utils.nonce,utils.debug=n&&n.enableLogging?n.enableLogging:utils.debug,utils.userPreferences.trackingDisabled=!!n&&!!n.tracking_disabled&&!0===n.tracking_disabled,utils.userPreferences.enableExtendedJourneysAssist=n&&n.enableExtendedJourneysAssist?n.enableExtendedJourneysAssist:utils.userPreferences.enableExtendedJourneysAssist,utils.extendedJourneysAssistExpiryTime=n&&n.extendedJourneysAssistExpiryTime&&Number.isInteger(n.extendedJourneysAssistExpiryTime)?n.extendedJourneysAssistExpiryTime:utils.extendedJourneysAssistExpiryTime,utils.userPreferences.allowErrorsInCallback=!1,utils.getClientHints(),utils.userPreferences.trackingDisabled&&utils.cleanApplicationAndSessionStorage(r),t=session.get(r._storage,!0),r.identity_id=t&&t.identity_id;var i=function(e){return e.link_click_id&&(r.link_click_id=e.link_click_id.toString()),e.session_link_click_id&&(r.session_link_click_id=e.session_link_click_id.toString()),e.session_id&&(r.session_id=e.session_id.toString()),e.identity_id&&(r.identity_id=e.identity_id.toString()),e.identity&&(r.identity=e.identity.toString()),e.link&&(r.sessionLink=e.link),e.referring_link&&(e.referring_link=utils.processReferringLink(e.referring_link)),!e.click_id&&e.referring_link&&(e.click_id=utils.getClickIdAndSearchStringFromLink(e.referring_link)),r.browser_fingerprint_id=e.browser_fingerprint_id,e};t=session.get(r._storage);var a=n&&void 0!==n.branch_match_id&&null!==n.branch_match_id?n.branch_match_id:null,o=a||utils.getParamValue("_branch_match_id")||utils.hashValue("r"),s=!r.identity_id;r._branchViewEnabled=!!r._storage.get("branch_view_enabled");var l=function(e){var t={sdk:config.version,branch_key:r.branch_key},n=session.get(r._storage)||{},i=session.get(r._storage,!0)||{};i.browser_fingerprint_id&&(t._t=i.browser_fingerprint_id),utils.isSafari11OrGreater()||utils.isIOSWKWebView()||r._api(resources._r,t,function(e,t){e&&(r.init_state_fail_code=init_state_fail_codes.BFP_NOT_FOUND,r.init_state_fail_details=e.message),t&&(n.browser_fingerprint_id=t)}),e&&e(null,n)},d=function(e){return s&&(e.identity=r.identity),e},c=function(t,o){if(o&&(o=i(o),utils.userPreferences.trackingDisabled||(o=d(o),session.set(r._storage,o,s)),r.init_state=init_states.INIT_SUCCEEDED,o.data_parsed=o.data&&0!==o.data.length?safejson.parse(o.data):{}),t)return r.init_state=init_states.INIT_FAILED,r.init_state_fail_code||(r.init_state_fail_code=init_state_fail_codes.UNKNOWN_CAUSE,r.init_state_fail_details=t.message),e(t,o&&utils.whiteListSessionData(o));try{e(t,o&&utils.whiteListSessionData(o))}catch(l){}finally{r.renderFinalize()}t=utils.getAdditionalMetadata(),(o=utils.validateParameterType(n.metadata,"object")?n.metadata:null)&&(o=utils.mergeHostedDeeplinkData(t.hosted_deeplink_data,o))&&0<Object.keys(o).length&&(t.hosted_deeplink_data=o);var c=branch_view._getPageviewRequestData(journeys_utils._getPageviewMetadata(n,t),n,r,!1);r.renderQueue(function(){r._api(resources.pageview,c,function(e,t){e||"object"!=typeof t||(e=!!c.branch_view_id,branch_view.shouldDisplayJourney(t,n,e)?branch_view.displayJourney(t.template,c,c.branch_view_id||t.event_data.branch_view_data.id,t.event_data.branch_view_data,e,t.journey_link_data):((t.auto_branchify||!a&&utils.getParamValue("branchify_url")&&r._referringLink())&&this.branch.deepview({},{make_new_link:!1,open_app:!0,auto_branchify:!0}),journeys_utils.branch._publishEvent("willNotShowJourney"))),utils.userPreferences.trackingDisabled&&(utils.userPreferences.allowErrorsInCallback=!0)})})},u=function(){if(void 0!==document.hidden)var e="hidden",t="visibilitychange";else void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");t&&!r.changeEventListenerAdded&&(r.changeEventListenerAdded=!0,document.addEventListener(t,function(){document[e]||(l(null),"function"==typeof r._deepviewRequestForReplay&&r._deepviewRequestForReplay())},!1))};if(t&&t.session_id&&!o&&!utils.getParamValue("branchify_url"))session.update(r._storage,{data:""}),session.update(r._storage,{referring_link:""}),u(),l(c);else{t={sdk:config.version,branch_key:r.branch_key};var p=session.get(r._storage,!0)||{};p.browser_fingerprint_id&&(t._t=p.browser_fingerprint_id),p.identity&&(r.identity=p.identity);var f=parseInt(utils.getParamValue("[?&]_open_delay_ms"),10);utils.isSafari11OrGreater()||utils.isIOSWKWebView()?utils.delay(function(){r._api(resources.open,{link_identifier:o,browser_fingerprint_id:o||p.browser_fingerprint_id,identity:p.identity?p.identity:null,alternative_browser_fingerprint_id:p.browser_fingerprint_id,options:n,initial_referrer:utils.getInitialReferrer(r._referringLink()),current_url:utils.getCurrentUrl(),screen_height:utils.getScreenHeight(),screen_width:utils.getScreenWidth(),model:utils.userAgentData?utils.userAgentData.model:null,os_version:utils.userAgentData?utils.userAgentData.platformVersion:null},function(e,t){e&&(r.init_state_fail_code=init_state_fail_codes.OPEN_FAILED,r.init_state_fail_details=e.message),e||"object"!=typeof t||(t.branch_view_enabled&&(r._branchViewEnabled=!!t.branch_view_enabled,r._storage.set("branch_view_enabled",r._branchViewEnabled)),o&&(t.click_id=o)),u(),c(e,t)})},f):r._api(resources._r,t,function(e,t){if(e)return r.init_state_fail_code=init_state_fail_codes.BFP_NOT_FOUND,r.init_state_fail_details=e.message,c(e,null);utils.delay(function(){r._api(resources.open,{link_identifier:o,browser_fingerprint_id:o||t,identity:p.identity?p.identity:null,alternative_browser_fingerprint_id:p.browser_fingerprint_id,options:n,initial_referrer:utils.getInitialReferrer(r._referringLink()),current_url:utils.getCurrentUrl(),screen_height:utils.getScreenHeight(),screen_width:utils.getScreenWidth(),model:utils.userAgentData?utils.userAgentData.model:null,os_version:utils.userAgentData?utils.userAgentData.platformVersion:null},function(e,t){e&&(r.init_state_fail_code=init_state_fail_codes.OPEN_FAILED,r.init_state_fail_details=e.message),e||"object"!=typeof t||(t.branch_view_enabled&&(r._branchViewEnabled=!!t.branch_view_enabled,r._storage.set("branch_view_enabled",r._branchViewEnabled)),o&&(t.click_id=o)),u(),c(e,t)})},f)})}},!0),Branch.prototype.renderQueue=wrap(callback_params.NO_CALLBACK,function(e,t){this._renderFinalized?t():(this._renderQueue=this._renderQueue||[],this._renderQueue.push(t)),e(null,null)}),Branch.prototype.renderFinalize=wrap(callback_params.CALLBACK_ERR_DATA,function(e){this._renderQueue&&0<this._renderQueue.length&&(this._renderQueue.forEach(function(e){e.call(this)}),delete this._renderQueue),this._renderFinalized=!0,e(null,null)}),Branch.prototype.data=wrap(callback_params.CALLBACK_ERR_DATA,function(e){var t=utils.whiteListSessionData(session.get(this._storage));t.referring_link=this._referringLink(),t.data_parsed=t.data&&0!==t.data.length?safejson.parse(t.data):{},e(null,t)}),Branch.prototype.first=wrap(callback_params.CALLBACK_ERR_DATA,function(e){e(null,utils.whiteListSessionData(session.get(this._storage,!0)))}),Branch.prototype.setIdentity=wrap(callback_params.CALLBACK_ERR_DATA,function(e,t){if(t){var n={identity_id:this.identity_id,session_id:this.session_id,link:this.sessionLink,developer_identity:t};this.identity=t,session.patch(this._storage,{identity:t},!0),e(null,n)}else e(Error(utils.message(utils.messages.missingIdentity)))}),Branch.prototype.logout=wrap(callback_params.CALLBACK_ERR,function(e){this.identity=null,session.patch(this._storage,{identity:null},!0,!0),e(null)}),Branch.prototype.getBrowserFingerprintId=wrap(callback_params.CALLBACK_ERR_DATA,function(e){e(null,(session.get(this._storage,!0)||{}).browser_fingerprint_id||null)}),Branch.prototype.crossPlatformIds=wrap(callback_params.CALLBACK_ERR_DATA,function(e){this._api(resources.crossPlatformIds,{user_data:safejson.stringify(utils.getUserData(this))},function(t,n){return e(t||null,n&&n.user_data||null)})}),Branch.prototype.lastAttributedTouchData=wrap(callback_params.CALLBACK_ERR_DATA,function(e,t){t=utils.validateParameterType(t,"number")?t:null;var n=utils.getUserData(this);utils.addPropertyIfNotNull(n,"attribution_window",t),this._api(resources.lastAttributedTouchData,{user_data:safejson.stringify(n)},function(t,n){return e(t||null,n||null)})}),Branch.prototype.track=wrap(callback_params.CALLBACK_ERR,function(e,t,n,r){if(n=n||{},r=r||{},utils.nonce=r.nonce?r.nonce:utils.nonce,"pageview"===t){(t=utils.mergeHostedDeeplinkData(utils.getHostedDeepLinkData(),n))&&0<Object.keys(t).length&&(n.hosted_deeplink_data=t);var i=branch_view._getPageviewRequestData(journeys_utils._getPageviewMetadata(r,n),r,this,!1);this._api(resources.pageview,i,function(t,n){if(!t&&"object"==typeof n){var a=!!i.branch_view_id;branch_view.shouldDisplayJourney(n,r,a)?branch_view.displayJourney(n.template,i,i.branch_view_id||n.event_data.branch_view_data.id,n.event_data.branch_view_data,a,n.journey_link_data):journeys_utils.branch._publishEvent("willNotShowJourney")}"function"==typeof e&&e.apply(this,arguments)})}else console.warn("track method currently supports only pageview event.")}),Branch.prototype.logEvent=wrap(callback_params.CALLBACK_ERR,function(e,t,n,r,i){t=utils.validateParameterType(t,"string")?t:null,n=utils.validateParameterType(n,"object")?n:null,i=utils.validateParameterType(i,"string")?i:null,n=utils.separateEventAndCustomData(n),utils.isStandardEvent(t)?(r=utils.validateParameterType(r,"array")?r:null,this._api(resources.logStandardEvent,{name:t,user_data:safejson.stringify(utils.getUserData(this)),custom_data:safejson.stringify(n&&n.custom_data||{}),event_data:safejson.stringify(n&&n.event_data||{}),content_items:safejson.stringify(r||[]),customer_event_alias:i},function(t,n){return e(t||null)})):this._api(resources.logCustomEvent,{name:t,user_data:safejson.stringify(utils.getUserData(this)),custom_data:safejson.stringify(n&&n.custom_data||{}),event_data:safejson.stringify(n&&n.event_data||{}),content_items:safejson.stringify(r||[]),customer_event_alias:i},function(t,n){return e(t||null)})}),Branch.prototype.link=wrap(callback_params.CALLBACK_ERR_DATA,function(e,t){var n=utils.cleanLinkData(t),r=this.branch_key;this._api(resources.link,n,function(t,i){if(t)return e(t,utils.generateDynamicBNCLink(r,n));e(null,i&&i.url)})}),Branch.prototype.qrCode=wrap(callback_params.CALLBACK_ERR_DATA,function(e,t,n,r){utils.cleanLinkData(t).qr_code_settings=safejson.stringify(utils.convertObjectValuesToString(n||{})),this._api(resources.qrCode,utils.cleanLinkData(t),function(t,n){function r(){}return t||(r.rawBuffer=n,r.base64=function(){if(this.rawBuffer)return btoa(String.fromCharCode.apply(null,new Uint8Array(this.rawBuffer)));throw Error("QrCode.rawBuffer is empty.")}),e(t||null,r||null)})}),Branch.prototype.deepview=wrap(callback_params.CALLBACK_ERR,function(e,t,n){var r=this;n||(n={}),n.deepview_type=void 0===n.deepview_type?"deepview":"banner",t.data=utils.merge(utils.getHostedDeepLinkData(),t.data),t=utils.isIframe()?utils.merge({is_iframe:!0},t):t,t=utils.cleanLinkData(t);var i=utils.generateDynamicBNCLink(this.branch_key,t);(n.open_app||null===n.open_app||void 0===n.open_app)&&(t.open_app=!0),t.append_deeplink_path=!!n.append_deeplink_path,t.deepview_type=n.deepview_type;var a=r._referringLink();a&&!n.make_new_link&&(t.link_click_id=utils.getClickIdAndSearchStringFromLink(a)),t.banner_options=n,n.auto_branchify&&(t.auto_branchify=!0),r._deepviewRequestForReplay=goog.bind(this._api,r,resources.deepview,t,function(t,n){if(t)return utils.userPreferences.trackingDisabled||(r._deepviewCta=function(){r._windowRedirect(i)}),e(t);"function"==typeof n&&(r._deepviewCta=n),e(null)}),r._deepviewRequestForReplay()}),Branch.prototype._windowRedirect=function(e){window.top.location=e},Branch.prototype.deepviewCta=wrap(callback_params.CALLBACK_ERR,function(e){if(void 0===this._deepviewCta)return e(utils.userPreferences.trackingDisabled?Error(utils.messages.trackingDisabled):Error(utils.messages.deepviewNotCalled),null);window.event&&(window.event.preventDefault?window.event.preventDefault():window.event.returnValue=!1),this._publishEvent("didDeepviewCTA"),this._deepviewCta(),e()}),Branch.prototype.addListener=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e=null),t&&this._listeners.push({listener:t,event:e||null})},Branch.prototype.removeListener=function(e){e&&(this._listeners=this._listeners.filter(function(t){if(t.listener!==e)return t}))},Branch.prototype.setBranchViewData=wrap(callback_params.CALLBACK_ERR,function(e,t){_setBranchViewData.call(null,this,e,t)},!0),Branch.prototype.closeJourney=wrap(callback_params.CALLBACK_ERR,function(e){var t=this;t.renderQueue(function(){if(!journeys_utils.banner||!journeys_utils.isJourneyDisplayed)return e("Journey already dismissed.");t._publishEvent("didCallJourneyClose",journeys_utils.journeyLinkData),journeys_utils.animateBannerExit(journeys_utils.banner,!0)}),e()}),Branch.prototype.banner=wrap(callback_params.CALLBACK_ERR,function(e,t,n){if(console.warn('The "banner" method is deprecated and will be removed in future versions. Please use Branch Journeys instead. For more information and migration steps, visit: https://help.branch.io/using-branch/docs/journeys-overview'),["other","desktop"].includes(utils.getPlatformByUserAgent()))console.info("banner functionality is not supported on this platform");else{n=n||{},_setBranchViewData.call(null,this,function(){},n),void 0===t.showAgain&&void 0!==t.forgetHide&&(t.showAgain=t.forgetHide);var r={icon:utils.cleanBannerText(t.icon)||"",title:utils.cleanBannerText(t.title)||"",description:utils.cleanBannerText(t.description)||"",reviewCount:"number"==typeof t.reviewCount&&0<t.reviewCount?Math.floor(t.reviewCount):null,rating:"number"==typeof t.rating&&5>=t.rating&&0<t.rating?Math.round(2*t.rating)/2:null,openAppButtonText:utils.cleanBannerText(t.openAppButtonText)||"View in app",downloadAppButtonText:utils.cleanBannerText(t.downloadAppButtonText)||"Download App",iframe:void 0===t.iframe||t.iframe,showiOS:void 0===t.showiOS||t.showiOS,showiPad:void 0===t.showiPad||t.showiPad,showAndroid:void 0===t.showAndroid||t.showAndroid,showBlackberry:void 0===t.showBlackberry||t.showBlackberry,showWindowsPhone:void 0===t.showWindowsPhone||t.showWindowsPhone,showKindle:void 0===t.showKindle||t.showKindle,disableHide:!!t.disableHide,forgetHide:"number"==typeof t.forgetHide?t.forgetHide:!!t.forgetHide,respectDNT:void 0!==t.respectDNT&&t.respectDNT,position:t.position||"top",customCSS:t.customCSS||"",mobileSticky:void 0!==t.mobileSticky&&t.mobileSticky,buttonBorderColor:t.buttonBorderColor||"",buttonBackgroundColor:t.buttonBackgroundColor||"",buttonFontColor:t.buttonFontColor||"",buttonBorderColorHover:t.buttonBorderColorHover||"",buttonBackgroundColorHover:t.buttonBackgroundColorHover||"",buttonFontColorHover:t.buttonFontColorHover||"",make_new_link:!!t.make_new_link,open_app:!!t.open_app,immediate:!!t.immediate,append_deeplink_path:!!t.append_deeplink_path};void 0!==t.showMobile&&(r.showiOS=t.showMobile,r.showAndroid=t.showMobile,r.showBlackberry=t.showMobile,r.showWindowsPhone=t.showMobile,r.showKindle=t.showMobile),n.data=utils.merge(utils.getHostedDeepLinkData(),n.data);var i=this;i.renderQueue(function(){i.closeBannerPointer=banner(i,r,n,i._storage)})}e()}),Branch.prototype.closeBanner=wrap(0,function(e){var t=this;t.renderQueue(function(){t.closeBannerPointer&&(t._publishEvent("willCloseBanner"),t.closeBannerPointer(function(){t._publishEvent("didCloseBanner")}))}),e()}),Branch.prototype.trackCommerceEvent=wrap(callback_params.CALLBACK_ERR,function(e,t,n,r){var i=this;i.renderQueue(function(){var a=utils.validateCommerceEventParams(t,n);if(a)return e(Error(a));i._api(resources.commerceEvent,{event:t,metadata:utils.merge({url:document.URL,user_agent:navigator.userAgent,language:navigator.language},r||{}),initial_referrer:utils.getInitialReferrer(i._referringLink()),commerce_data:n},function(t,n){e(t||null)})}),e()}),Branch.prototype.disableTracking=wrap(callback_params.CALLBACK_ERR,function(e,t){!1===t||"false"===t?(utils.userPreferences.trackingDisabled=!1,utils.userPreferences.allowErrorsInCallback=!1,this.branch_key&&this.init_options&&(!0===this.init_options.tracking_disabled&&delete this.init_options.tracking_disabled,this.init(this.branch_key,this.init_options))):(void 0===t||!0===t||"true"===t)&&(utils.cleanApplicationAndSessionStorage(this),utils.userPreferences.trackingDisabled=!0,utils.userPreferences.allowErrorsInCallback=!0,this.closeBanner(),this.closeJourney()),e()},!0),Branch.prototype.setAPIResponseCallback=wrap(callback_params.NO_CALLBACK,function(e,t){this._server.onAPIResponse=t,e()},!0),Branch.prototype.referringLink=function(e){return this._referringLink(e)},Branch.prototype.setDMAParamsForEEA=wrap(callback_params.CALLBACK_ERR,function(e,t,n,r){try{var i={};i.eeaRegion=t||!1,i.adPersonalizationConsent=n||!1,i.adUserDataUsageConsent=r||!1,this._storage.set("branch_dma_data",safejson.stringify(i),!0)}catch(a){console.error("setDMAParamsForEEA::An error occured while setting DMA parameters for EEA",a)}e()},!0),Branch.prototype.setRequestMetaData=function(e,t){try{null!=e&&0!==e.length&&void 0!==t&&(this.requestMetadata.hasOwnProperty(e)&&null===t&&delete this.requestMetadata[e],this.requestMetadata=utils.addPropertyIfNotNull(this.requestMetadata,e,t))}catch(n){console.error("An error occured while setting request metadata",n)}},Branch.prototype.setAPIUrl=function(e){utils.isValidURL(e)?config.api_endpoint=e:console.error("setAPIUrl: Invalid URL format. Default URL will be set.")},Branch.prototype.getAPIUrl=function(){return config.api_endpoint};var branch_instance=new Branch;if(window.branch&&window.branch._q)for(var queue=window.branch._q,i=0;i<queue.length;i++){var task=queue[i];branch_instance[task[0]].apply(branch_instance,task[1])}"function"==typeof define&&define.amd?define("branch",function(){return branch_instance}):"object"==typeof exports&&(module.exports=branch_instance),window&&(window.branch=branch_instance)}();