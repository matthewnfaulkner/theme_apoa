{"version":3,"file":"simple-image-zoom.min.js","sources":["../src/simple-image-zoom.js"],"sourcesContent":["define(function () {\r\n\r\nvar simpleImageExpand = function(options) {\r\n  console.log(\"here\");\r\n  // IE8 utility function\r\n  /**\r\n * Register event listeners for the subscription toggle.\r\n *\r\n * @param {object} elem The discussion list root element\r\n * @param {type} eventType The discussion list root element\r\n * @param {function} handler The discussion list root element\r\n */\r\n  function addEventHandler(elem,eventType,handler) {\r\n    if (elem.addEventListener){\r\n      elem.addEventListener (eventType,handler,false);\r\n    }\r\n    else if (elem.attachEvent){\r\n      elem.attachEvent ('on'+eventType,handler);\r\n    }\r\n  }\r\n  // handle options\r\n  var fullIconPos = '',\r\n      options = options || {};\r\n  options.zoomClass = options.zoomClass || 'zoom-enabled';\r\n  options.zoomMaxWidth = options.zoomMaxWidth || 'initial';\r\n  options.zoomMaxHeight = options.zoomMaxHeight || 'initial';\r\n  options.overlayOpacity = options.overlayOpacity || '.8';\r\n  options.overlayColor = options.overlayColor || 'black';\r\n  options.iconSize = options.iconSize || '24px';\r\n  options.iconShow = options.hasOwnProperty('iconShow') ? options.iconShow : true;\r\n  options.iconToggleOnly = options.iconToggleOnly || false;\r\n  options.iconPos = options.iconPos || { right: 0, bottom: 0};\r\n  for (var posProp in options.iconPos){\r\n    fullIconPos += posProp + ': ' + options.iconPos[posProp] + ';';\r\n  }\r\n  options.iconImg = options.iconImg ||  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqVJREFUeNq8VjuLGlEUnhlHNz5BsnkYXdwQNWCxVoFUWlhJCotgI4LiP5AUlpZiEfwBgljZSBohpaCpUgUkIEELH1EkJCH4fo1jzpE7wZjRnXElB84uc+d6vjnnfOe7l95sNjRFUfeJX1DntQX4T3QWAUaj0XU0GnU3Go2Xk8nESNP0nRE0Gs0vu93+MZvNftDr9RQNGT0PBAKvqtXqa3jPwjN3DiCMBc65XK53hULhPYPlwkzIiyWA8PD/HL7EmCT2BQJR0+nUiOjU+Y0jsbdZ/GNQPobjOCXP88zuOsMwPDinUCjWp9QRA1O7fUGQZrP5Yn/zcDhc+/3+z71ebywVAGNvPxL/7Dd/PxO0wWDAx2Kxr+12ey4nEyE2I/UHUC6q3+8jWTanNEsykE6nY4LB4APIVkmG/O5AQrrQC65SqUyF9VAoZEylUk8BTHEykNA0ArRutVqLZDLZDYfDXyKRSEt4V6vVZrhdLhAqw43D4XiLqkEGbUtvtVqtBDlaA53XYKzX6720WCyqXC7Xh379UQ8y4McSmdbr9TfsgdLx8/l8gQTYzgDLrsrl8jeBFAgMWZq63e6yVCr9QGAsp1arVcxms5UYOCODpjw6EgHK+SSRSFxlMplnbrf70Wq1Uvt8vsfFYvEGZpA9OLBiQ3sM0+l0qoUHKOU1EOahzWZTmc1mFGXFUSCpio09i8fjzeVyySALcc3j8WjESLX78Yxs9sDAAtgqn89/H4/HvBRVOAmIfCltMplUQAp5oirXrFbrvXQ6fWUwGBiR0vKS1fs263Q6Mzg5P4kdIzgKYurNyiHCjsCupZ5Jf5EBLxKnlvG21pDYW6AF3lbIUa4ia1tHKdp9FvMjezAWR2IvUOsud69bwhkvtXeH9uxdt1r0/7pA/hZgACO4VuIsr37kAAAAAElFTkSuQmCC';\r\n  console.log(options);\r\n  // DOM elements\r\n  var style = document.createElement('style'),\r\n      cnt = document.createElement('div'),\r\n      icon = document.createElement('i');\r\n  cnt.className = 'zoom-container';\r\n  icon.className = 'zoom-icon';\r\n\r\n  var css = document.createTextNode('.zoom-container { display: block !important; position: relative !important; text-decoration: none; }\\n ' +\r\n       '#zoom-overlay { z-index: 990; position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; background-color:' + options.overlayColor + '; text-align: center;  -ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + (options.overlayOpacity*10) + ')\";' +\r\n       'filter: alpha(opacity=' + (options.overlayOpacity*10) + '); -moz-opacity: ' + options.overlayOpacity + '; -khtml-opacity: ' + options.overlayOpacity + '; opacity: ' + options.overlayOpacity + ';} \\n' +\r\n       '#zoom-overlay img { top: 50%; width: initial; height: initial; position: relative; max-width:' + options.zoomMaxWidth + '; max-height: ' + options.zoomMaxHeight + '}\\n' +\r\n       '.zoom-container i { display: block; position: absolute; height: ' + options.iconSize + '; width: ' + options.iconSize + '; ' + 'background-image: url(' + options.iconImg + ');' + fullIconPos + '}');\r\n  style.appendChild(css);\r\n\r\n  // overlay functions & element\r\n  var overlay = {\r\n    element: document.createElement('div'),\r\n    init: function() {\r\n      overlay.status = 0;\r\n      overlay.element.id = 'zoom-overlay';\r\n      document.body.insertBefore(overlay.element, document.body.firstChild);\r\n      addEventHandler(overlay.element, 'click', overlay.hide);\r\n    },\r\n    show: function(img) {\r\n      var img = img.cloneNode();\r\n      overlay.status = 1;\r\n      overlay.element.appendChild(img);\r\n      img.onload = function() {\r\n        img.style.marginTop = - (img.clientHeight/2) +'px';\r\n      };\r\n      overlay.element.style.display = 'block';\r\n    },\r\n    hide: function() {\r\n      overlay.status = 0;\r\n      overlay.element.innerHTML = '';\r\n      overlay.element.style.cssText = '';\r\n    }\r\n  },\r\n  // always return the container\r\n  boundElement = function(elem) {\r\n    if (elem.className === 'zoom-container' && !options.iconToggleOnly){\r\n      return elem;\r\n    }\r\n    else if ((elem.className === options.zoomClass && !options.iconToggleOnly) || elem.className === 'zoom-icon')\r\n    {\r\n      return elem.parentNode;\r\n    }\r\n  },\r\n  // zoom functions\r\n  zoom = {\r\n    bind: function() {\r\n      const selector = `img.${options.zoomClass}`;\r\n      var zoomImages = document.querySelectorAll(selector);\r\n      for (var i = zoomImages.length; i--;) {\r\n        if (zoomImages[i].getAttribute('data-bound') !== 'true')\r\n        {\r\n          zoom.init(zoomImages[i]);\r\n        }\r\n      }\r\n    },\r\n    init: function(e) {\r\n      var target = e.target || e.srcElement || e, container;\r\n      target.setAttribute('data-bound', 'true');\r\n      container = cnt.cloneNode();\r\n      target.parentNode.insertBefore(container, target);\r\n      container.appendChild(target);\r\n      container.style.width = target.clientWidth +'px';\r\n      container.style.height = target.clientHeight +'px';\r\n      if (options.iconShow){\r\n        container.appendChild(icon.cloneNode());\r\n      }\r\n    },\r\n    update: function(e) {\r\n      var target = boundElement(e.target || e.srcElement), img;\r\n      if (target) {\r\n        img = target.getElementsByTagName('img')[0];\r\n        if (!overlay.hasOwnProperty('status')){\r\n          overlay.init();\r\n        }\r\n        if (!overlay.status){\r\n          overlay.show(img);\r\n        }\r\n        else{\r\n          overlay.hide();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // init\r\n  document.getElementsByTagName('head')[0].appendChild(style);\r\n  addEventHandler(document.body, 'click', zoom.update);\r\n  zoom.bind();\r\n  if (options.dynamicLoad) {\r\n    setInterval(function() {\r\n      if (overlay.status !== 1){\r\n        zoom.bind();\r\n      }\r\n    }, options.dynamicInterval || 200);\r\n  }\r\n};\r\n  return{\r\n    expand: simpleImageExpand\r\n  };\r\n});"],"names":["define","expand","options","addEventHandler","elem","eventType","handler","addEventListener","attachEvent","console","log","fullIconPos","posProp","zoomClass","zoomMaxWidth","zoomMaxHeight","overlayOpacity","overlayColor","iconSize","iconShow","hasOwnProperty","iconToggleOnly","iconPos","right","bottom","iconImg","style","document","createElement","cnt","icon","className","css","createTextNode","appendChild","overlay","element","init","status","id","body","insertBefore","firstChild","hide","show","img","cloneNode","onload","marginTop","clientHeight","display","innerHTML","cssText","zoom","bind","selector","zoomImages","querySelectorAll","i","length","getAttribute","e","container","target","srcElement","setAttribute","parentNode","width","clientWidth","height","update","getElementsByTagName","dynamicLoad","setInterval","dynamicInterval"],"mappings":"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"}