/**
 * Update preferences for user hiding warning notifications
 *
 * @module     theme_apoa/hidewarnings
 * @copyright  2024 Matthew Faulkner <matthewfaulkner@apoaevents.com
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_apoa/hidewarnings",["core/ajax","core/notification"],(function(Ajax,Notification){return{init:function(name,userid){let query='[data-warning-notification="'+name+'"]',parent=document.querySelector(query),link=parent.querySelector(".dontshowagain");const d=new Date;let time=Math.floor(d.getTime()/1e3);link.addEventListener("click",(e=>{e.preventDefault();let close=parent.querySelector(".close");return Ajax.call([{methodname:"core_user_set_user_preferences",args:{preferences:[{name:name,value:time,userid:userid}]}}])[0].done((function(){close.click()})).fail((function(){Notification.exception(new Error("Failed to set preference"))}))}))}}}));

//# sourceMappingURL=hidewarnings.min.js.map